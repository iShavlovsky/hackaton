var Pt=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var r=(s,t,e)=>(Pt(s,t,"read from private field"),e?e.call(s):t.get(s)),l=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},h=(s,t,e,i)=>(Pt(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e);var wt=(s,t,e,i)=>({set _(n){h(s,t,n,e)},get _(){return r(s,t,i)}}),C=(s,t,e)=>(Pt(s,t,"access private method"),e);import{a as _t,u as re,h as ne,i as ae,r as ue,c as oe,b as he,w as Et,o as ce,t as le,d as fe}from"./@vue-BdFQIQkk.js";var bt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gt=typeof window>"u"||"Deno"in globalThis;function U(){}function de(s,t){return typeof s=="function"?s(t):s}function ye(s){return typeof s=="number"&&s>=0&&s!==1/0}function pe(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Rt(s,t){const{type:e="all",exact:i,fetchStatus:n,predicate:a,queryKey:u,stale:c}=s;if(u){if(i){if(t.queryHash!==qt(u,t.options))return!1}else if(!yt(t.queryKey,u))return!1}if(e!=="all"){const m=t.isActive();if(e==="active"&&!m||e==="inactive"&&m)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||n&&n!==t.state.fetchStatus||a&&!a(t))}function At(s,t){const{exact:e,status:i,predicate:n,mutationKey:a}=s;if(a){if(!t.options.mutationKey)return!1;if(e){if(st(t.options.mutationKey)!==st(a))return!1}else if(!yt(t.options.mutationKey,a))return!1}return!(i&&t.state.status!==i||n&&!n(t))}function qt(s,t){return((t==null?void 0:t.queryKeyHashFn)||st)(s)}function st(s){return JSON.stringify(s,(t,e)=>Ft(e)?Object.keys(e).sort().reduce((i,n)=>(i[n]=e[n],i),{}):e)}function yt(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?!Object.keys(t).some(e=>!yt(s[e],t[e])):!1}function Vt(s,t){if(s===t)return s;const e=jt(s)&&jt(t);if(e||Ft(s)&&Ft(t)){const i=e?s:Object.keys(s),n=i.length,a=e?t:Object.keys(t),u=a.length,c=e?[]:{};let m=0;for(let p=0;p<u;p++){const y=e?p:a[p];(!e&&i.includes(y)||e)&&s[y]===void 0&&t[y]===void 0?(c[y]=void 0,m++):(c[y]=Vt(s[y],t[y]),c[y]===s[y]&&s[y]!==void 0&&m++)}return n===u&&m===n?s:c}return t}function me(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(s[e]!==t[e])return!1;return!0}function jt(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Ft(s){if(!Ut(s))return!1;const t=s.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!Ut(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Ut(s){return Object.prototype.toString.call(s)==="[object Object]"}function ve(s){return new Promise(t=>{setTimeout(t,s)})}function be(s,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(s,t):e.structuralSharing!==!1?Vt(s,t):t}function ge(s,t,e=0){const i=[...s,t];return e&&i.length>e?i.slice(1):i}function we(s,t,e=0){const i=[t,...s];return e&&i.length>e?i.slice(0,-1):i}var Bt=Symbol(),Yt=(s,t)=>!s.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!s.queryFn||s.queryFn===Bt?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn,X,$,rt,Kt,Oe=(Kt=class extends bt{constructor(){super();l(this,X,void 0);l(this,$,void 0);l(this,rt,void 0);h(this,rt,t=>{if(!gt&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){r(this,$)||this.setEventListener(r(this,rt))}onUnsubscribe(){var t;this.hasListeners()||((t=r(this,$))==null||t.call(this),h(this,$,void 0))}setEventListener(t){var e;h(this,rt,t),(e=r(this,$))==null||e.call(this),h(this,$,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){r(this,X)!==t&&(h(this,X,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){var t;return typeof r(this,X)=="boolean"?r(this,X):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},X=new WeakMap,$=new WeakMap,rt=new WeakMap,Kt),zt=new Oe,nt,_,at,It,Qe=(It=class extends bt{constructor(){super();l(this,nt,!0);l(this,_,void 0);l(this,at,void 0);h(this,at,t=>{if(!gt&&window.addEventListener){const e=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",i)}}})}onSubscribe(){r(this,_)||this.setEventListener(r(this,at))}onUnsubscribe(){var t;this.hasListeners()||((t=r(this,_))==null||t.call(this),h(this,_,void 0))}setEventListener(t){var e;h(this,at,t),(e=r(this,_))==null||e.call(this),h(this,_,t(this.setOnline.bind(this)))}setOnline(t){r(this,nt)!==t&&(h(this,nt,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return r(this,nt)}},nt=new WeakMap,_=new WeakMap,at=new WeakMap,It),Ct=new Qe;function Ce(s){return Math.min(1e3*2**s,3e4)}function Jt(s){return(s??"online")==="online"?Ct.isOnline():!0}var Wt=class{constructor(s){this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function St(s){return s instanceof Wt}function Xt(s){let t=!1,e=0,i=!1,n,a,u;const c=new Promise((b,O)=>{a=b,u=O}),m=b=>{var O;i||(D(new Wt(b)),(O=s.abort)==null||O.call(s))},p=()=>{t=!0},y=()=>{t=!1},d=()=>zt.isFocused()&&(s.networkMode==="always"||Ct.isOnline())&&s.canRun(),o=()=>Jt(s.networkMode)&&s.canRun(),v=b=>{var O;i||(i=!0,(O=s.onSuccess)==null||O.call(s,b),n==null||n(),a(b))},D=b=>{var O;i||(i=!0,(O=s.onError)==null||O.call(s,b),n==null||n(),u(b))},q=()=>new Promise(b=>{var O;n=g=>{(i||d())&&b(g)},(O=s.onPause)==null||O.call(s)}).then(()=>{var b;n=void 0,i||(b=s.onContinue)==null||b.call(s)}),k=()=>{if(i)return;let b;const O=e===0?s.initialPromise:void 0;try{b=O??s.fn()}catch(g){b=Promise.reject(g)}Promise.resolve(b).then(v).catch(g=>{var Q;if(i)return;const P=s.retry??(gt?0:3),E=s.retryDelay??Ce,L=typeof E=="function"?E(e,g):E,it=P===!0||typeof P=="number"&&e<P||typeof P=="function"&&P(e,g);if(t||!it){D(g);return}e++,(Q=s.onFail)==null||Q.call(s,e,g),ve(L).then(()=>d()?void 0:q()).then(()=>{t?D(g):k()})})};return{promise:c,cancel:m,continue:()=>(n==null||n(),c),cancelRetry:p,continueRetry:y,canStart:o,start:()=>(o()?k():q().then(k),c)}}function Pe(){let s=[],t=0,e=o=>{o()},i=o=>{o()},n=o=>setTimeout(o,0);const a=o=>{n=o},u=o=>{let v;t++;try{v=o()}finally{t--,t||p()}return v},c=o=>{t?s.push(o):n(()=>{e(o)})},m=o=>(...v)=>{c(()=>{o(...v)})},p=()=>{const o=s;s=[],o.length&&n(()=>{i(()=>{o.forEach(v=>{e(v)})})})};return{batch:u,batchCalls:m,schedule:c,setNotifyFunction:o=>{e=o},setBatchNotifyFunction:o=>{i=o},setScheduler:a}}var F=Pe(),Z,xt,Zt=(xt=class{constructor(){l(this,Z,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ye(this.gcTime)&&h(this,Z,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(gt?1/0:5*60*1e3))}clearGcTimeout(){r(this,Z)&&(clearTimeout(r(this,Z)),h(this,Z,void 0))}},Z=new WeakMap,xt),ut,ot,j,S,pt,tt,T,H,kt,Se=(kt=class extends Zt{constructor(t){super();l(this,T);l(this,ut,void 0);l(this,ot,void 0);l(this,j,void 0);l(this,S,void 0);l(this,pt,void 0);l(this,tt,void 0);h(this,tt,!1),h(this,pt,t.defaultOptions),this.setOptions(t.options),this.observers=[],h(this,j,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,h(this,ut,t.state||De(this.options)),this.state=r(this,ut),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=r(this,S))==null?void 0:t.promise}setOptions(t){this.options={...r(this,pt),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&r(this,j).remove(this)}setData(t,e){const i=be(this.state.data,t,this.options);return C(this,T,H).call(this,{data:i,type:"success",dataUpdatedAt:e==null?void 0:e.updatedAt,manual:e==null?void 0:e.manual}),i}setState(t,e){C(this,T,H).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var i,n;const e=(i=r(this,S))==null?void 0:i.promise;return(n=r(this,S))==null||n.cancel(t),e?e.then(U).catch(U):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(r(this,ut))}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!pe(this.state.dataUpdatedAt,t)}onFocus(){var e;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(e=r(this,S))==null||e.continue()}onOnline(){var e;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(e=r(this,S))==null||e.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),r(this,j).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(r(this,S)&&(r(this,tt)?r(this,S).cancel({revert:!0}):r(this,S).cancelRetry()),this.scheduleGc()),r(this,j).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||C(this,T,H).call(this,{type:"invalidate"})}fetch(t,e){var m,p,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(e!=null&&e.cancelRefetch))this.cancel({silent:!0});else if(r(this,S))return r(this,S).continueRetry(),r(this,S).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(o=>o.options.queryFn);d&&this.setOptions(d.options)}const i=new AbortController,n=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(h(this,tt,!0),i.signal)})},a=()=>{const d=Yt(this.options,e),o={queryKey:this.queryKey,meta:this.meta};return n(o),h(this,tt,!1),this.options.persister?this.options.persister(d,o,this):d(o)},u={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};n(u),(m=this.options.behavior)==null||m.onFetch(u,this),h(this,ot,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=u.fetchOptions)==null?void 0:p.meta))&&C(this,T,H).call(this,{type:"fetch",meta:(y=u.fetchOptions)==null?void 0:y.meta});const c=d=>{var o,v,D,q;St(d)&&d.silent||C(this,T,H).call(this,{type:"error",error:d}),St(d)||((v=(o=r(this,j).config).onError)==null||v.call(o,d,this),(q=(D=r(this,j).config).onSettled)==null||q.call(D,this.state.data,d,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return h(this,S,Xt({initialPromise:e==null?void 0:e.initialPromise,fn:u.fetchFn,abort:i.abort.bind(i),onSuccess:d=>{var o,v,D,q;if(d===void 0){c(new Error(`${this.queryHash} data is undefined`));return}this.setData(d),(v=(o=r(this,j).config).onSuccess)==null||v.call(o,d,this),(q=(D=r(this,j).config).onSettled)==null||q.call(D,d,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:c,onFail:(d,o)=>{C(this,T,H).call(this,{type:"failed",failureCount:d,error:o})},onPause:()=>{C(this,T,H).call(this,{type:"pause"})},onContinue:()=>{C(this,T,H).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),r(this,S).start()}},ut=new WeakMap,ot=new WeakMap,j=new WeakMap,S=new WeakMap,pt=new WeakMap,tt=new WeakMap,T=new WeakSet,H=function(t){const e=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Fe(i.data,this.options),fetchMeta:t.meta??null};case"success":return{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return St(n)&&n.revert&&r(this,ot)?{...r(this,ot),fetchStatus:"idle"}:{...i,error:n,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=e(this.state),F.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),r(this,j).notify({query:this,type:"updated",action:t})})},kt);function Fe(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Jt(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function De(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,e=t!==void 0,i=e?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}var K,Lt,te=(Lt=class extends bt{constructor(e={}){super();l(this,K,void 0);this.config=e,h(this,K,new Map)}build(e,i,n){const a=i.queryKey,u=i.queryHash??qt(a,i);let c=this.get(u);return c||(c=new Se({cache:this,queryKey:a,queryHash:u,options:e.defaultQueryOptions(i),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(c)),c}add(e){r(this,K).has(e.queryHash)||(r(this,K).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const i=r(this,K).get(e.queryHash);i&&(e.destroy(),i===e&&r(this,K).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){F.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return r(this,K).get(e)}getAll(){return[...r(this,K).values()]}find(e){const i={exact:!0,...e};return this.getAll().find(n=>Rt(i,n))}findAll(e={}){const i=this.getAll();return Object.keys(e).length>0?i.filter(n=>Rt(e,n)):i}notify(e){F.batch(()=>{this.listeners.forEach(i=>{i(e)})})}onFocus(){F.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){F.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},K=new WeakMap,Lt),I,M,et,x,N,Ht,Me=(Ht=class extends Zt{constructor(t){super();l(this,x);l(this,I,void 0);l(this,M,void 0);l(this,et,void 0);this.mutationId=t.mutationId,h(this,M,t.mutationCache),h(this,I,[]),this.state=t.state||ee(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){r(this,I).includes(t)||(r(this,I).push(t),this.clearGcTimeout(),r(this,M).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){h(this,I,r(this,I).filter(e=>e!==t)),this.scheduleGc(),r(this,M).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){r(this,I).length||(this.state.status==="pending"?this.scheduleGc():r(this,M).remove(this))}continue(){var t;return((t=r(this,et))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var n,a,u,c,m,p,y,d,o,v,D,q,k,b,O,g,P,E,L,it;h(this,et,Xt({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(Q,W)=>{C(this,x,N).call(this,{type:"failed",failureCount:Q,error:W})},onPause:()=>{C(this,x,N).call(this,{type:"pause"})},onContinue:()=>{C(this,x,N).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>r(this,M).canRun(this)}));const e=this.state.status==="pending",i=!r(this,et).canStart();try{if(!e){C(this,x,N).call(this,{type:"pending",variables:t,isPaused:i}),await((a=(n=r(this,M).config).onMutate)==null?void 0:a.call(n,t,this));const W=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t));W!==this.state.context&&C(this,x,N).call(this,{type:"pending",context:W,variables:t,isPaused:i})}const Q=await r(this,et).start();return await((p=(m=r(this,M).config).onSuccess)==null?void 0:p.call(m,Q,t,this.state.context,this)),await((d=(y=this.options).onSuccess)==null?void 0:d.call(y,Q,t,this.state.context)),await((v=(o=r(this,M).config).onSettled)==null?void 0:v.call(o,Q,null,this.state.variables,this.state.context,this)),await((q=(D=this.options).onSettled)==null?void 0:q.call(D,Q,null,t,this.state.context)),C(this,x,N).call(this,{type:"success",data:Q}),Q}catch(Q){try{throw await((b=(k=r(this,M).config).onError)==null?void 0:b.call(k,Q,t,this.state.context,this)),await((g=(O=this.options).onError)==null?void 0:g.call(O,Q,t,this.state.context)),await((E=(P=r(this,M).config).onSettled)==null?void 0:E.call(P,void 0,Q,this.state.variables,this.state.context,this)),await((it=(L=this.options).onSettled)==null?void 0:it.call(L,void 0,Q,t,this.state.context)),Q}finally{C(this,x,N).call(this,{type:"error",error:Q})}}finally{r(this,M).runNext(this)}}},I=new WeakMap,M=new WeakMap,et=new WeakMap,x=new WeakSet,N=function(t){const e=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),F.batch(()=>{r(this,I).forEach(i=>{i.onMutationUpdate(t)}),r(this,M).notify({mutation:this,type:"updated",action:t})})},Ht);function ee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var A,mt,Gt,se=(Gt=class extends bt{constructor(e={}){super();l(this,A,void 0);l(this,mt,void 0);this.config=e,h(this,A,new Map),h(this,mt,Date.now())}build(e,i,n){const a=new Me({mutationCache:this,mutationId:++wt(this,mt)._,options:e.defaultMutationOptions(i),state:n});return this.add(a),a}add(e){const i=Ot(e),n=r(this,A).get(i)??[];n.push(e),r(this,A).set(i,n),this.notify({type:"added",mutation:e})}remove(e){var n;const i=Ot(e);if(r(this,A).has(i)){const a=(n=r(this,A).get(i))==null?void 0:n.filter(u=>u!==e);a&&(a.length===0?r(this,A).delete(i):r(this,A).set(i,a))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const i=(n=r(this,A).get(Ot(e)))==null?void 0:n.find(a=>a.state.status==="pending");return!i||i===e}runNext(e){var n;const i=(n=r(this,A).get(Ot(e)))==null?void 0:n.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}clear(){F.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...r(this,A).values()].flat()}find(e){const i={exact:!0,...e};return this.getAll().find(n=>At(i,n))}findAll(e={}){return this.getAll().filter(i=>At(e,i))}notify(e){F.batch(()=>{this.listeners.forEach(i=>{i(e)})})}resumePausedMutations(){const e=this.getAll().filter(i=>i.state.isPaused);return F.batch(()=>Promise.all(e.map(i=>i.continue().catch(U))))}},A=new WeakMap,mt=new WeakMap,Gt);function Ot(s){var t;return((t=s.options.scope)==null?void 0:t.id)??String(s.mutationId)}function qe(s){return{onFetch:(t,e)=>{const i=async()=>{var D,q,k,b,O;const n=t.options,a=(k=(q=(D=t.fetchOptions)==null?void 0:D.meta)==null?void 0:q.fetchMore)==null?void 0:k.direction,u=((b=t.state.data)==null?void 0:b.pages)||[],c=((O=t.state.data)==null?void 0:O.pageParams)||[],m={pages:[],pageParams:[]};let p=!1;const y=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},d=Yt(t.options,t.fetchOptions),o=async(g,P,E)=>{if(p)return Promise.reject();if(P==null&&g.pages.length)return Promise.resolve(g);const L={queryKey:t.queryKey,pageParam:P,direction:E?"backward":"forward",meta:t.options.meta};y(L);const it=await d(L),{maxPages:Q}=t.options,W=E?we:ge;return{pages:W(g.pages,it,Q),pageParams:W(g.pageParams,P,Q)}};let v;if(a&&u.length){const g=a==="backward",P=g?Ee:Tt,E={pages:u,pageParams:c},L=P(n,E);v=await o(E,L,g)}else{v=await o(m,c[0]??n.initialPageParam);const g=s??u.length;for(let P=1;P<g;P++){const E=Tt(n,v);v=await o(v,E)}}return v};t.options.persister?t.fetchFn=()=>{var n,a;return(a=(n=t.options).persister)==null?void 0:a.call(n,i,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e)}:t.fetchFn=i}}}function Tt(s,{pages:t,pageParams:e}){const i=t.length-1;return s.getNextPageParam(t[i],t,e[i],e)}function Ee(s,{pages:t,pageParams:e}){var i;return(i=s.getPreviousPageParam)==null?void 0:i.call(s,t[0],t,e[0],e)}var w,V,B,ht,ct,Y,lt,ft,Nt,Re=(Nt=class{constructor(t={}){l(this,w,void 0);l(this,V,void 0);l(this,B,void 0);l(this,ht,void 0);l(this,ct,void 0);l(this,Y,void 0);l(this,lt,void 0);l(this,ft,void 0);h(this,w,t.queryCache||new te),h(this,V,t.mutationCache||new se),h(this,B,t.defaultOptions||{}),h(this,ht,new Map),h(this,ct,new Map),h(this,Y,0)}mount(){wt(this,Y)._++,r(this,Y)===1&&(h(this,lt,zt.subscribe(async t=>{t&&(await this.resumePausedMutations(),r(this,w).onFocus())})),h(this,ft,Ct.subscribe(async t=>{t&&(await this.resumePausedMutations(),r(this,w).onOnline())})))}unmount(){var t,e;wt(this,Y)._--,r(this,Y)===0&&((t=r(this,lt))==null||t.call(this),h(this,lt,void 0),(e=r(this,ft))==null||e.call(this),h(this,ft,void 0))}isFetching(t){return r(this,w).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return r(this,V).findAll({...t,status:"pending"}).length}getQueryData(t){var i;const e=this.defaultQueryOptions({queryKey:t});return(i=r(this,w).get(e.queryHash))==null?void 0:i.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const i=this.defaultQueryOptions(t),n=r(this,w).build(this,i);return t.revalidateIfStale&&n.isStaleByTime(i.staleTime)&&this.prefetchQuery(i),Promise.resolve(e)}}getQueriesData(t){return r(this,w).findAll(t).map(({queryKey:e,state:i})=>{const n=i.data;return[e,n]})}setQueryData(t,e,i){const n=this.defaultQueryOptions({queryKey:t}),a=r(this,w).get(n.queryHash),u=a==null?void 0:a.state.data,c=de(e,u);if(c!==void 0)return r(this,w).build(this,n).setData(c,{...i,manual:!0})}setQueriesData(t,e,i){return F.batch(()=>r(this,w).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,i)]))}getQueryState(t){var i;const e=this.defaultQueryOptions({queryKey:t});return(i=r(this,w).get(e.queryHash))==null?void 0:i.state}removeQueries(t){const e=r(this,w);F.batch(()=>{e.findAll(t).forEach(i=>{e.remove(i)})})}resetQueries(t,e){const i=r(this,w),n={type:"active",...t};return F.batch(()=>(i.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const i={revert:!0,...e},n=F.batch(()=>r(this,w).findAll(t).map(a=>a.cancel(i)));return Promise.all(n).then(U).catch(U)}invalidateQueries(t={},e={}){return F.batch(()=>{if(r(this,w).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const i={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(i,e)})}refetchQueries(t={},e){const i={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=F.batch(()=>r(this,w).findAll(t).filter(a=>!a.isDisabled()).map(a=>{let u=a.fetch(void 0,i);return i.throwOnError||(u=u.catch(U)),a.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(n).then(U)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const i=r(this,w).build(this,e);return i.isStaleByTime(e.staleTime)?i.fetch(e):Promise.resolve(i.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(U).catch(U)}fetchInfiniteQuery(t){return t.behavior=qe(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(U).catch(U)}resumePausedMutations(){return Ct.isOnline()?r(this,V).resumePausedMutations():Promise.resolve()}getQueryCache(){return r(this,w)}getMutationCache(){return r(this,V)}getDefaultOptions(){return r(this,B)}setDefaultOptions(t){h(this,B,t)}setQueryDefaults(t,e){r(this,ht).set(st(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...r(this,ht).values()];let i={};return e.forEach(n=>{yt(t,n.queryKey)&&(i={...i,...n.defaultOptions})}),i}setMutationDefaults(t,e){r(this,ct).set(st(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...r(this,ct).values()];let i={};return e.forEach(n=>{yt(t,n.mutationKey)&&(i={...i,...n.defaultOptions})}),i}defaultQueryOptions(t){if(t._defaulted)return t;const e={...r(this,B).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qt(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Bt&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...r(this,B).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){r(this,w).clear(),r(this,V).clear()}},w=new WeakMap,V=new WeakMap,B=new WeakMap,ht=new WeakMap,ct=new WeakMap,Y=new WeakMap,lt=new WeakMap,ft=new WeakMap,Nt),z,J,R,G,dt,Qt,vt,Dt,$t,Ae=($t=class extends bt{constructor(t,e){super();l(this,dt);l(this,vt);l(this,z,void 0);l(this,J,void 0);l(this,R,void 0);l(this,G,void 0);h(this,z,t),this.setOptions(e),this.bindMethods(),C(this,dt,Qt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const e=this.options;this.options=r(this,z).defaultMutationOptions(t),me(this.options,e)||r(this,z).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,R),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&st(e.mutationKey)!==st(this.options.mutationKey)?this.reset():((i=r(this,R))==null?void 0:i.state.status)==="pending"&&r(this,R).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=r(this,R))==null||t.removeObserver(this)}onMutationUpdate(t){C(this,dt,Qt).call(this),C(this,vt,Dt).call(this,t)}getCurrentResult(){return r(this,J)}reset(){var t;(t=r(this,R))==null||t.removeObserver(this),h(this,R,void 0),C(this,dt,Qt).call(this),C(this,vt,Dt).call(this)}mutate(t,e){var i;return h(this,G,e),(i=r(this,R))==null||i.removeObserver(this),h(this,R,r(this,z).getMutationCache().build(r(this,z),this.options)),r(this,R).addObserver(this),r(this,R).execute(t)}},z=new WeakMap,J=new WeakMap,R=new WeakMap,G=new WeakMap,dt=new WeakSet,Qt=function(){var e;const t=((e=r(this,R))==null?void 0:e.state)??ee();h(this,J,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},vt=new WeakSet,Dt=function(t){F.batch(()=>{var e,i,n,a,u,c,m,p;if(r(this,G)&&this.hasListeners()){const y=r(this,J).variables,d=r(this,J).context;(t==null?void 0:t.type)==="success"?((i=(e=r(this,G)).onSuccess)==null||i.call(e,t.data,y,d),(a=(n=r(this,G)).onSettled)==null||a.call(n,t.data,null,y,d)):(t==null?void 0:t.type)==="error"&&((c=(u=r(this,G)).onError)==null||c.call(u,t.error,y,d),(p=(m=r(this,G)).onSettled)==null||p.call(m,void 0,t.error,y,d))}this.listeners.forEach(y=>{y(r(this,J))})})},$t),je="VUE_QUERY_CLIENT";function ie(s){const t=s?`:${s}`:"";return`${je}${t}`}function Ue(s,t){Object.keys(s).forEach(e=>{s[e]=t[e]})}function Mt(s,t){if(t){const e=t(s);if(e===void 0&&_t(s)||e!==void 0)return e}if(Array.isArray(s))return s.map(e=>Mt(e,t));if(typeof s=="object"&&Te(s)){const e=Object.entries(s).map(([i,n])=>[i,Mt(n,t)]);return Object.fromEntries(e)}return s}function f(s){return Mt(s,t=>{if(_t(t))return f(re(t))})}function Te(s){if(Object.prototype.toString.call(s)!=="[object Object]")return!1;const t=Object.getPrototypeOf(s);return t===null||t===Object.prototype}function Ke(s,t){return typeof s=="function"?s(...t):!!s}function Ie(s=""){if(!ne())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const t=ie(s),e=ae(t);if(!e)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return e}var xe=class extends te{find(s){return super.find(f(s))}findAll(s={}){return super.findAll(f(s))}},ke=class extends se{find(s){return super.find(f(s))}findAll(s={}){return super.findAll(f(s))}},Le=class extends Re{constructor(s={}){const t={defaultOptions:s.defaultOptions,queryCache:s.queryCache||new xe,mutationCache:s.mutationCache||new ke};super(t),this.isRestoring=ue(!1)}isFetching(s={}){return super.isFetching(f(s))}isMutating(s={}){return super.isMutating(f(s))}getQueryData(s){return super.getQueryData(f(s))}ensureQueryData(s){return super.ensureQueryData(f(s))}getQueriesData(s){return super.getQueriesData(f(s))}setQueryData(s,t,e={}){return super.setQueryData(f(s),t,f(e))}setQueriesData(s,t,e={}){return super.setQueriesData(f(s),t,f(e))}getQueryState(s){return super.getQueryState(f(s))}removeQueries(s={}){return super.removeQueries(f(s))}resetQueries(s={},t={}){return super.resetQueries(f(s),f(t))}cancelQueries(s={},t={}){return super.cancelQueries(f(s),f(t))}invalidateQueries(s={},t={}){return new Promise(e=>{setTimeout(async()=>{await super.invalidateQueries(f(s),f(t)),e()},0)})}refetchQueries(s={},t={}){return super.refetchQueries(f(s),f(t))}fetchQuery(s){return super.fetchQuery(f(s))}prefetchQuery(s){return super.prefetchQuery(f(s))}fetchInfiniteQuery(s){return super.fetchInfiniteQuery(f(s))}prefetchInfiniteQuery(s){return super.prefetchInfiniteQuery(f(s))}setDefaultOptions(s){super.setDefaultOptions(f(s))}setQueryDefaults(s,t){super.setQueryDefaults(f(s),f(t))}getQueryDefaults(s){return super.getQueryDefaults(f(s))}setMutationDefaults(s,t){super.setMutationDefaults(f(s),f(t))}getMutationDefaults(s){return super.getMutationDefaults(f(s))}},Ve={install:(s,t={})=>{const e=ie(t.queryClientKey);let i;if("queryClient"in t&&t.queryClient)i=t.queryClient;else{const u="queryClientConfig"in t?t.queryClientConfig:void 0;i=new Le(u)}gt||i.mount();let n=()=>{};if(t.clientPersister){i.isRestoring.value=!0;const[u,c]=t.clientPersister(i);n=u,c.then(()=>{var m;i.isRestoring.value=!1,(m=t.clientPersisterOnSuccess)==null||m.call(t,i)})}const a=()=>{i.unmount(),n()};if(s.onUnmount)s.onUnmount(a);else{const u=s.unmount;s.unmount=function(){a(),u()}}s.provide(e,i)}};function Be(s,t){const e=Ie(),i=oe(()=>e.defaultMutationOptions(f(s))),n=new Ae(e,i.value),a=he(n.getCurrentResult()),u=n.subscribe(p=>{Ue(a,p)}),c=(p,y)=>{n.mutate(p,y).catch(()=>{})};Et(i,()=>{n.setOptions(i.value)}),ce(()=>{u()});const m=le(fe(a));return Et(()=>a.error,p=>{if(p&&Ke(i.value.throwOnError,[p]))throw p}),{...m,mutate:c,mutateAsync:a.mutate,reset:a.reset}}export{Le as Q,Ve as V,Be as u};
