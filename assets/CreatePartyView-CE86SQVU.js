import{R as T}from"./vue-router-Cu0oR64f.js";import{a as q}from"./abi-Bp99HW0C.js";import{b as he}from"./@vueuse-j7LIZsgf.js";import{a as fe}from"./index-BxI2tGW2.js";import{a as ye,e as ge,f as xe}from"./@wagmi-BZSUIKUR.js";import{f as be,g as we,P as Me,T as Ce,A as ke,e as Pe}from"./@vicons-CQyrKpPr.js";import{u as Ie,a as $e,N as ze,s as je,t as Ne,e as Ae,o as De}from"./naive-ui-KFCgUZf6.js";import{e as Re,r as M,q as Se,b as W,c as C,w as $,a0 as E,a1 as d,u as l,f as _,j as e,a2 as i,x as V,a3 as c,a5 as O,g as y,Y,F as L,Q as G,a as Be}from"./@vue-CyX75HH2.js";import"./pinia-D4LGdsiM.js";import"./@tanstack-Y25bY9CG.js";import"./viem-JszMgIpC.js";import"./zustand-23CcGmLH.js";import"./eventemitter3-BYCAYZDL.js";import"./@babel-B0IGr_Mv.js";import"./mipd-CIcDX0W7.js";import"./seemly-D2wyWRjj.js";import"./vooks-e9-YowDj.js";import"./evtd-CI_DDEu_.js";import"./lodash-es-D1IKaXUS.js";import"./vueuc-DEvtCtA4.js";import"./@css-render-CT4uy2oC.js";import"./vdirs-Bxp-63WN.js";import"./@juggle-C8OzoCMD.js";import"./@emotion-WldOFDRm.js";import"./treemate-BD4Oer00.js";import"./date-fns-ByyCCKXE.js";import"./date-fns-tz-D_KSBUZx.js";import"./async-validator-DKvM95Vc.js";const Fe={class:"container main-container-padding"},Ue=e("p",null,"Back",-1),Te={class:"container main-container-padding max-w-648"},qe=e("div",{class:"display-grid gap-16 text-center"},[e("h1",{class:"text-40px"},"Create party"),e("p",{class:"op-06"},"Unite with others to increase reward")],-1),We={class:"display-grid gap-16 mt-40"},Ee={class:"party-form-w display-grid gap-32"},Ve=e("h2",{class:"text-accent-900 text-center"},"Party details",-1),Oe={class:"display-grid gap-8"},Ye={class:"party-form-w display-grid gap-32"},Le=e("h2",{class:"text-accent-900 text-center"},"Your share",-1),Ge={class:"you-share-w display-grid grid-cols-2 gap-32"},He={class:"display-flex gap-12 align-items-center"},Ke={class:"ico-w"},Qe={class:"display-grid gap-2"},Je=e("p",{class:"text-12px op-06"},"Your wallet",-1),Xe={class:"text-14px"},Ze={class:"party-form-w display-grid gap-32"},et=e("h2",{class:"text-accent-900 text-center"},"Party members",-1),tt={class:"display-grid gap-8"},st={class:"display-flex gap-16"},at={class:"display-flex member-revenue-w"},nt={class:"op-06"},ot={class:"display-grid gap-2"},it={class:"text-16px op-06"},lt={class:"display-flex gap-16"},rt=["onClick"],dt=["onClick"],ct={class:"display-flex gap-16 align-items-center"},pt={class:"display-flex member-revenue-w add-member-ico"},ut=e("span",null,"Add type of members",-1),mt={class:"party-form-w party-no-bg display-grid gap-32"},_t=e("h2",{class:"text-16px text-center"},"Your revenue will be distributed like this:",-1),vt={class:"revenue-distributed-w display-flex gap-8"},ht={class:"revenue-distributed-info display-grid gap-2"},ft=e("p",{class:"text-16px op-06"},"@malamuth (you)",-1),yt={class:"revenue-distributed-info display-grid gap-2"},gt={class:"text-16px op-06"},xt=e("span",null,"Create party",-1),bt=[xt],wt=e("div",null,null,-1),Mt={class:"quests-card-modal-content p-tb-24px mt-40"},Ct=e("h1",{class:"text-center"},"Add type of members",-1),kt={class:"display-grid gap-8 mt-40"},Pt=e("div",null,null,-1),It={class:"quests-card-modal-content p-tb-24px mt-40"},$t=e("h1",{class:"text-center"},"Done!!",-1),zt={class:"display-grid gap-8 mt-40"},jt={class:"display-flex flex-row gap-8 align-items-center op-06"},Nt=e("span",null,"Come back home",-1),ls=Re({__name:"CreatePartyView",setup(At){const H=fe(),z="0x3aE5995509df0Bd125bA20593aA8A945E520e714",u=Ie(),{isConnected:j,address:g,chainId:N}=ye(),v=M(!1),f=M(-1);function K(){return Math.random().toString(36).substring(7)}const Q=M("createRS"),k=M([]),{data:x,error:J,isPending:X,isSuccess:b,isError:Z,writeContract:ee}=ge(),te=()=>{ne.value?ee({abi:q,chainId:N.value,address:z,account:g.value,functionName:Q.value,...k.value&&k.value.length?{args:k.value}:{}}):u.warning("Fill in all the fields")},{data:P,refetch:se}=xe({abi:q,chainId:N.value,address:z,account:g.value,functionName:"lastPartyId",query:{enabled:!0}}),A=async()=>{await se(),u.info(`last Party Id: ${P.value}`),console.log("last Party Id:",P.value)};Se(()=>{A()});const a=W({name:"",description:"",share:null,partyMembers:[{id:"asdad",name:"Telegram members",description:"Those who joined party via TG",revenue:15}]}),o=W({id:"",name:"",description:"",revenue:null}),ae=C(()=>a.partyMembers.reduce((n,t)=>n+(t.revenue??0),0)),I=C(()=>a.share?`${a.share}`:`${100-ae.value}`),ne=C(()=>!!a.name&&a.description&&a.share),oe=C(()=>!!o.name&&o.description&&o.revenue),D=()=>{o.id="",o.name="",o.description="",o.revenue=null},ie=n=>{const t=a.partyMembers.findIndex(r=>r.id===n.id);if(t!==-1){f.value=t,v.value=!0;const{id:r,name:p,description:h,revenue:w}=n;Object.assign(o,{id:r,name:p,description:h,revenue:w})}},R=()=>{if(oe.value){if(f.value>=0)a.partyMembers[f.value]={...o},f.value=-1;else{const n={id:K(),name:o.name,description:o.description,revenue:o.revenue};a.partyMembers.push(n)}v.value=!1,D(),u.success("Party members created")}else u.warning("Fill in all fields correctly")},le=n=>{const t=a.partyMembers.findIndex(r=>r.id===n);t!==-1&&a.partyMembers.splice(t,1)},{text:re,copy:de,copied:ce,isSupported:pe}=he(),ue=n=>{g.value&&de(n).then(()=>{ce&&u.success(re.value)})};$(()=>v.value,n=>{n||D()});function m(n,t){return Math.floor(Math.random()*(t-n+1))+n}function me(){const n=m(1,100),t=m(1e3,5e3),r=m(-10,10),p=m(1e3,2e3),h=m(0,50);return{people:n,yourTokens:t,yourTokensPercentage:r,totalDistributed:p,totalDistributedPercentage:h}}const S=["./images/user7.jpg","./images/avatar-main.jpg"],B=["./images/party2.jpg","./images/party1.jpg"],_e=()=>{H.party.push({index:P.value,party:{avatar:B[m(0,B.length-1)],name:a.name,description:a.description},owner:{avatar:S[m(0,S.length-1)],name:"@meuw",owner:!0},share:a.share,partyMembers:a.partyMembers,...me()})};return $(()=>b.value,()=>{u.success(`Done ${x.value}`),A(),_e()}),$(()=>Z.value,()=>{var n;u.error(`Error ${(n=J.value)==null?void 0:n.message}`)}),(n,t)=>{const r=ze,p=je,h=Ne,w=Ae,F=$e,U=De;return _(),E(F,{show:l(X)},{default:d(()=>[e("section",null,[e("div",Fe,[i(l(T),{class:"display-flex align-items-center",to:"/"},{default:d(()=>[i(r,{component:l(be),depth:1,size:24,color:"#fff"},null,8,["component"]),Ue]),_:1})])]),e("section",null,[e("div",Te,[qe,e("div",We,[e("div",Ee,[Ve,e("div",Oe,[i(p,{value:a.name,"onUpdate:value":t[0]||(t[0]=s=>a.name=s),valueModifiers:{trim:!0},path:"user.name",placeholder:"Name",size:"large",type:"text"},null,8,["value"]),i(p,{value:a.description,"onUpdate:value":t[1]||(t[1]=s=>a.description=s),valueModifiers:{trim:!0},placeholder:"Description",size:"large",type:"text"},null,8,["value"])])]),e("div",Ye,[Le,e("div",Ge,[i(h,{value:a.share,"onUpdate:value":t[2]||(t[2]=s=>a.share=s),valueModifiers:{trim:!0},"default-value":null,max:100,min:1,placeholder:`${I.value}%`,"show-button":!1,step:1,size:"large"},null,8,["value","placeholder"]),e("div",He,[e("div",Ke,[i(r,{component:l(we),depth:1,size:16,color:"#fff"},null,8,["component"])]),e("div",Qe,[i(F,{show:!l(j)},{default:d(()=>[Je,e("p",Xe,[l(j)?(_(),E(w,{key:0,tooltip:!0,style:{"max-width":"100px",color:"white"}},{default:d(()=>[V(c(l(g)),1)]),_:1})):O("",!0)])]),_:1},8,["show"])])])])]),e("div",Ze,[et,e("div",tt,[(_(!0),y(L,null,Y(a.partyMembers,s=>(_(),y("div",{key:s.id,class:"add-member display-flex justify-between align-items-center"},[e("div",st,[e("div",at,[e("p",nt,c(s.revenue)+"%",1)]),e("div",ot,[e("p",null,c(s.name),1),e("p",it,c(s.description),1)])]),e("div",lt,[e("button",{class:"main-custom-btn gray-btn",type:"button",onClick:ve=>ie(s)},[e("span",null,[i(r,{component:l(Me),depth:1,size:16,color:"#fff"},null,8,["component"])])],8,rt),e("button",{class:"main-custom-btn red-btn",type:"button",onClick:ve=>le(s.id)},[e("span",null,[i(r,{component:l(Ce),depth:1,size:16,color:"#fff"},null,8,["component"])])],8,dt)])]))),128)),e("button",{class:"add-member text-left display-flex justify-between align-items-center",onClick:t[3]||(t[3]=s=>v.value=!0)},[e("span",ct,[e("span",pt,[e("span",null,[i(r,{component:l(ke),depth:1,size:24,color:"#fff"},null,8,["component"])])]),ut])])])]),e("div",mt,[_t,e("div",vt,[e("div",{style:G({maxWidth:`${I.value}%`,minWidth:"10%"}),class:"revenue-distributed-holder display-flex align-items-center justify-center"},[e("div",ht,[e("p",null,c(I.value)+"%",1),ft])],4),(_(!0),y(L,null,Y(a.partyMembers,s=>(_(),y("div",{key:s.id,style:G({maxWidth:`${s.revenue}%`,minWidth:"10%"}),class:"revenue-distributed-holder display-flex align-items-center justify-center"},[e("div",yt,[e("p",null,c(s.revenue)+"%",1),e("p",gt,[i(w,{tooltip:!0,style:{"max-width":"150px"}},{default:d(()=>[V(c(s.name),1)]),_:2},1024)])])],4))),128))]),e("div",{class:"mt-80 width-full"},[e("button",{class:"main-custom-btn width-full",type:"button",onClick:te},bt)])])])]),i(U,{show:v.value,"onUpdate:show":t[7]||(t[7]=s=>v.value=s),class:"quest-custom-modal min-w-648",preset:"dialog",title:"Dialog"},{header:d(()=>[wt]),default:d(()=>[e("div",Mt,[Ct,e("div",kt,[i(p,{value:o.name,"onUpdate:value":t[4]||(t[4]=s=>o.name=s),valueModifiers:{trim:!0},placeholder:"Name",size:"large",type:"text"},null,8,["value"]),i(p,{value:o.description,"onUpdate:value":t[5]||(t[5]=s=>o.description=s),valueModifiers:{trim:!0},placeholder:"Description",size:"large",type:"text"},null,8,["value"]),i(h,{value:o.revenue,"onUpdate:value":t[6]||(t[6]=s=>o.revenue=s),valueModifiers:{trim:!0},"default-value":null,max:a.share?100-a.share:100,min:1,placeholder:`Revenue share max ${a.share?100-a.share:100}% `,"show-button":!1,step:1,size:"large"},null,8,["value","max","placeholder"]),e("button",{class:"main-custom-btn width-full",type:"button",onClick:R},[e("span",null,c(f.value>=0?"Save":"Add"),1)])])])]),_:1},8,["show"]),i(U,{show:l(b),"onUpdate:show":t[9]||(t[9]=s=>Be(b)?b.value=s:null),class:"quest-custom-modal min-w-648",preset:"dialog",title:"Dialog"},{header:d(()=>[Pt]),default:d(()=>[e("div",It,[$t,e("div",zt,[e("div",jt,[e("p",null,c(l(x)),1),l(pe)&&l(x)?(_(),y("button",{key:0,class:"tech-btn",onClick:t[8]||(t[8]=s=>ue(l(x)))},[e("span",null,[i(r,{component:l(Pe),depth:1,size:24,color:"#fff"},null,8,["component"])])])):O("",!0)]),i(l(T),{class:"main-custom-btn width-full",to:"/",type:"button",onClick:R},{default:d(()=>[Nt]),_:1})])])]),_:1},8,["show"])])]),_:1},8,["show"])}}});export{ls as default};
