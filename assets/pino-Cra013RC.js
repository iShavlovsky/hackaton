import{a as P}from"./@babel-VbPd-4M3.js";import{q as g}from"./quick-format-unescaped-Dys6CG9o.js";const k=g;var q=u;const d=B().console||{},D={mapHttpRequest:O,mapHttpResponse:O,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:O,res:O,err:G};function C(e,t){return Array.isArray(e)?e.filter(function(s){return s!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function u(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const i=e.browser.write||d;e.browser.write&&(e.browser.asObject=!0);const s=e.serializers||{},n=C(e.browser.serialize,s);let l=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(l=!1);const o=["error","fatal","warn","info","debug","trace"];typeof i=="function"&&(i.error=i.fatal=i.warn=i.info=i.debug=i.trace=i),e.enabled===!1&&(e.level="silent");const c=e.level||"info",r=Object.create(i);r.log||(r.log=b),Object.defineProperty(r,"levelVal",{get:j}),Object.defineProperty(r,"level",{get:w,set:x});const f={transmit:t,serialize:n,asObject:e.browser.asObject,levels:o,timestamp:I(e)};r.levels=u.levels,r.level=c,r.setMaxListeners=r.getMaxListeners=r.emit=r.addListener=r.on=r.prependListener=r.once=r.prependOnceListener=r.removeListener=r.removeAllListeners=r.listeners=r.listenerCount=r.eventNames=r.write=r.flush=b,r.serializers=s,r._serialize=n,r._stdErrSerialize=l,r.child=F,t&&(r._logEvent=p());function j(){return this.level==="silent"?1/0:this.levels.values[this.level]}function w(){return this._level}function x(a){if(a!=="silent"&&!this.levels.values[a])throw Error("unknown level "+a);this._level=a,v(f,r,"error","log"),v(f,r,"fatal","error"),v(f,r,"warn","error"),v(f,r,"info","log"),v(f,r,"debug","log"),v(f,r,"trace","log")}function F(a,y){if(!a)throw new Error("missing bindings for child Pino");y=y||{},n&&a.serializers&&(y.serializers=a.serializers);const L=y.serializers;if(n&&L){var z=Object.assign({},s,L),S=e.browser.serialize===!0?Object.keys(z):n;delete a.serializers,_([a],S,z,this._stdErrSerialize)}function T(h){this._childLevel=(h._childLevel|0)+1,this.error=m(h,a,"error"),this.fatal=m(h,a,"fatal"),this.warn=m(h,a,"warn"),this.info=m(h,a,"info"),this.debug=m(h,a,"debug"),this.trace=m(h,a,"trace"),z&&(this.serializers=z,this._serialize=S),t&&(this._logEvent=p([].concat(h._logEvent.bindings,a)))}return T.prototype=this,new T(this)}return r}u.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};u.stdSerializers=D;u.stdTimeFunctions=Object.assign({},{nullTime:V,epochTime:A,unixTime:N,isoTime:U});function v(e,t,i,s){const n=Object.getPrototypeOf(t);t[i]=t.levelVal>t.levels.values[i]?b:n[i]?n[i]:d[i]||d[s]||b,H(e,t,i)}function H(e,t,i){!e.transmit&&t[i]===b||(t[i]=function(s){return function(){const l=e.timestamp(),o=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===d?d:this;for(var r=0;r<o.length;r++)o[r]=arguments[r];if(e.serialize&&!e.asObject&&_(o,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?s.call(c,R(this,i,o,l)):s.apply(c,o),e.transmit){const f=e.transmit.level||t.level,j=u.levels.values[f],w=u.levels.values[i];if(w<j)return;M(this,{ts:l,methodLevel:i,methodValue:w,transmitLevel:f,transmitValue:u.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},o)}}}(t[i]))}function R(e,t,i,s){e._serialize&&_(i,e._serialize,e.serializers,e._stdErrSerialize);const n=i.slice();let l=n[0];const o={};s&&(o.time=s),o.level=u.levels.values[t];let c=(e._childLevel|0)+1;if(c<1&&(c=1),l!==null&&typeof l=="object"){for(;c--&&typeof n[0]=="object";)Object.assign(o,n.shift());l=n.length?k(n.shift(),n):void 0}else typeof l=="string"&&(l=k(n.shift(),n));return l!==void 0&&(o.msg=l),o}function _(e,t,i,s){for(const n in e)if(s&&e[n]instanceof Error)e[n]=u.stdSerializers.err(e[n]);else if(typeof e[n]=="object"&&!Array.isArray(e[n]))for(const l in e[n])t&&t.indexOf(l)>-1&&l in i&&(e[n][l]=i[l](e[n][l]))}function m(e,t,i){return function(){const s=new Array(1+arguments.length);s[0]=t;for(var n=1;n<s.length;n++)s[n]=arguments[n-1];return e[i].apply(this,s)}}function M(e,t,i){const s=t.send,n=t.ts,l=t.methodLevel,o=t.methodValue,c=t.val,r=e._logEvent.bindings;_(i,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=i.filter(function(f){return r.indexOf(f)===-1}),e._logEvent.level.label=l,e._logEvent.level.value=o,s(l,e._logEvent,c),e._logEvent=p(r)}function p(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function G(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const i in e)t[i]===void 0&&(t[i]=e[i]);return t}function I(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?V:A}function O(){return{}}function E(e){return e}function b(){}function V(){return!1}function A(){return Date.now()}function N(){return Math.round(Date.now()/1e3)}function U(){return new Date(Date.now()).toISOString()}function B(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}const Q=P(q);export{Q as H,q as b};
