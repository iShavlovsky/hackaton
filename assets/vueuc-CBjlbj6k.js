import{l as Ue,F as Fe,C as Pe,d as k,y as qe,k as Ce,i as pe,f as C,g as te,H as Ie,t as ee,x as j,B as A,V as Ke,n as K,w as P,G as Oe,Q as ke,q as Ge,s as Qe,E as Ze}from"./@vue-gYnbaL6f.js";import{a as q,o as ae}from"./evtd-CI_DDEu_.js";import{b as We,d as ve,D as G,C as Je,a as Re}from"./seemly-D2wyWRjj.js";import{u as ne}from"./@css-render-J3N-P_TG.js";import{d as et,u as fe,o as tt,i as nt}from"./vooks-BOdELv9k.js";import{z as rt}from"./vdirs-Bxp-63WN.js";import{R as ot}from"./@juggle-C8OzoCMD.js";import{m as it}from"./@emotion-WldOFDRm.js";function de(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return r()}function ce(n,e=!0,t=[]){return n.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&t.push(Ue(String(r)));return}if(Array.isArray(r)){ce(r,e,t);return}if(r.type===Fe){if(r.children===null)return;Array.isArray(r.children)&&ce(r.children,e,t)}else r.type!==Pe&&t.push(r)}}),t}function be(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const o=ce(r());if(o.length===1)return o[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}let Y=null;function Le(){if(Y===null&&(Y=document.getElementById("v-binder-view-measurer"),Y===null)){Y=document.createElement("div"),Y.id="v-binder-view-measurer";const{style:n}=Y;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(Y)}return Y.getBoundingClientRect()}function lt(n,e){const t=Le();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function le(n){const e=n.getBoundingClientRect(),t=Le();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function st(n){return n.nodeType===9?null:n.parentNode}function He(n){if(n===null)return null;const e=st(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:r,overflowY:o}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+o+r))return e}return He(e)}const Kt=k({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;qe("VBinder",(e=Ce())===null||e===void 0?void 0:e.proxy);const t=pe("VBinder",null),r=C(null),o=l=>{r.value=l,t&&n.syncTargetWithParent&&t.setTargetRef(l)};let i=[];const u=()=>{let l=r.value;for(;l=He(l),l!==null;)i.push(l);for(const x of i)ae("scroll",x,y,!0)},d=()=>{for(const l of i)q("scroll",l,y,!0);i=[]},s=new Set,h=l=>{s.size===0&&u(),s.has(l)||s.add(l)},v=l=>{s.has(l)&&s.delete(l),s.size===0&&d()},y=()=>{We(c)},c=()=>{s.forEach(l=>l())},m=new Set,g=l=>{m.size===0&&ae("resize",window,a),m.has(l)||m.add(l)},b=l=>{m.has(l)&&m.delete(l),m.size===0&&q("resize",window,a)},a=()=>{m.forEach(l=>l())};return te(()=>{q("resize",window,a),d()}),{targetRef:r,setTargetRef:o,addScrollListener:h,removeScrollListener:v,addResizeListener:g,removeResizeListener:b}},render(){return de("binder",this.$slots)}}),Gt=k({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=pe("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?Ie(be("follower",this.$slots),[[e]]):be("follower",this.$slots)}});function ge(n,e){console.error(`[vueuc/${n}]: ${e}`)}function ut(n){let e=0;for(let t=0;t<n.length;++t)n[t]==="&"&&++e;return e}const Ve=/\s*,(?![^(]*\))\s*/g,at=/\s+/g;function ft(n,e){const t=[];return e.split(Ve).forEach(r=>{let o=ut(r);if(o){if(o===1){n.forEach(u=>{t.push(r.replace("&",u))});return}}else{n.forEach(u=>{t.push((u&&u+" ")+r)});return}let i=[r];for(;o--;){const u=[];i.forEach(d=>{n.forEach(s=>{u.push(d.replace("&",s))})}),i=u}i.forEach(u=>t.push(u))}),t}function dt(n,e){const t=[];return e.split(Ve).forEach(r=>{n.forEach(o=>{t.push((o&&o+" ")+r)})}),t}function ct(n){let e=[""];return n.forEach(t=>{t=t&&t.trim(),t&&(t.includes("&")?e=ft(e,t):e=dt(e,t))}),e.join(", ").replace(at," ")}function ye(n){if(!n)return;const e=n.parentElement;e&&e.removeChild(n)}function me(n,e){return(e??document.head).querySelector(`style[cssr-id="${n}"]`)}function ht(n){const e=document.createElement("style");return e.setAttribute("cssr-id",n),e}function Q(n){return n?/^\s*@(s|m)/.test(n):!1}const pt=/[A-Z]/g;function Ye(n){return n.replace(pt,e=>"-"+e.toLowerCase())}function mt(n,e="  "){return typeof n=="object"&&n!==null?` {
`+Object.entries(n).map(t=>e+`  ${Ye(t[0])}: ${t[1]};`).join(`
`)+`
`+e+"}":`: ${n};`}function vt(n,e,t){return typeof n=="function"?n({context:e.context,props:t}):n}function we(n,e,t,r){if(!e)return"";const o=vt(e,t,r);if(!o)return"";if(typeof o=="string")return`${n} {
${o}
}`;const i=Object.keys(o);if(i.length===0)return t.config.keepEmptyBlock?n+` {
}`:"";const u=n?[n+" {"]:[];return i.forEach(d=>{const s=o[d];if(d==="raw"){u.push(`
`+s+`
`);return}d=Ye(d),s!=null&&u.push(`  ${d}${mt(s)}`)}),n&&u.push("}"),u.join(`
`)}function he(n,e,t){n&&n.forEach(r=>{if(Array.isArray(r))he(r,e,t);else if(typeof r=="function"){const o=r(e);Array.isArray(o)?he(o,e,t):o&&t(o)}else r&&t(r)})}function Xe(n,e,t,r,o){const i=n.$;let u="";if(!i||typeof i=="string")Q(i)?u=i:e.push(i);else if(typeof i=="function"){const h=i({context:r.context,props:o});Q(h)?u=h:e.push(h)}else if(i.before&&i.before(r.context),!i.$||typeof i.$=="string")Q(i.$)?u=i.$:e.push(i.$);else if(i.$){const h=i.$({context:r.context,props:o});Q(h)?u=h:e.push(h)}const d=ct(e),s=we(d,n.props,r,o);u?t.push(`${u} {`):s.length&&t.push(s),n.children&&he(n.children,{context:r.context,props:o},h=>{if(typeof h=="string"){const v=we(d,{raw:h},r,o);t.push(v)}else Xe(h,e,t,r,o)}),e.pop(),u&&t.push("}"),i&&i.after&&i.after(r.context)}function bt(n,e,t){const r=[];return Xe(n,[],r,e,t),r.join(`

`)}typeof window<"u"&&(window.__cssrContext={});function gt(n,e,t,r){const{els:o}=e;if(t===void 0)o.forEach(ye),e.els=[];else{const i=me(t,r);i&&o.includes(i)&&(ye(i),e.els=o.filter(u=>u!==i))}}function xe(n,e){n.push(e)}function yt(n,e,t,r,o,i,u,d,s){let h;if(t===void 0&&(h=e.render(r),t=it(h)),s){s.adapter(t,h??e.render(r));return}d===void 0&&(d=document.head);const v=me(t,d);if(v!==null&&!i)return v;const y=v??ht(t);if(h===void 0&&(h=e.render(r)),y.textContent=h,v!==null)return v;if(u){const c=d.querySelector(`meta[name="${u}"]`);if(c)return d.insertBefore(y,c),xe(e.els,y),y}return o?d.insertBefore(y,d.querySelector("style, link")):d.appendChild(y),xe(e.els,y),y}function wt(n){return bt(this,this.instance,n)}function xt(n={}){const{id:e,ssr:t,props:r,head:o=!1,force:i=!1,anchorMetaName:u,parent:d}=n;return yt(this.instance,this,e,r,o,i,u,d,t)}function $t(n={}){const{id:e,parent:t}=n;gt(this.instance,this,e,t)}const Z=function(n,e,t,r){return{instance:n,$:e,props:t,children:r,els:[],render:wt,mount:xt,unmount:$t}},Mt=function(n,e,t,r){return Array.isArray(e)?Z(n,{$:null},null,e):Array.isArray(t)?Z(n,e,null,t):Array.isArray(r)?Z(n,e,t,r):Z(n,e,t,null)};function St(n={}){const e={c:(...t)=>Mt(e,...t),use:(t,...r)=>t.install(e,...r),find:me,context:{},config:n};return e}const{c:I}=St(),re="vueuc-style";function $e(n){return n&-n}class Et{constructor(e,t){this.l=e,this.min=t;const r=new Array(e+1);for(let o=0;o<e+1;++o)r[o]=0;this.ft=r}add(e,t){if(t===0)return;const{l:r,ft:o}=this;for(e+=1;e<=r;)o[e]+=t,e+=$e(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===void 0&&(e=this.l),e<=0)return 0;const{ft:t,min:r,l:o}=this;if(e>o)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let i=e*r;for(;e>0;)i+=t[e],e-=$e(e);return i}getBound(e){let t=0,r=this.l;for(;r>t;){const o=Math.floor((t+r)/2),i=this.sum(o);if(i>e){r=o;continue}else if(i<e){if(t===o)return this.sum(t+1)<=e?t+1:o;t=o}else return o}return t}}function Me(n){return typeof n=="string"?document.querySelector(n):n()}const Tt=k({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:et(ee(n,"show")),mergedTo:j(()=>{const{to:e}=n;return e??"body"})}},render(){return this.showTeleport?this.disabled?de("lazy-teleport",this.$slots):A(Ke,{disabled:this.disabled,to:this.mergedTo},de("lazy-teleport",this.$slots)):null}}),J={top:"bottom",bottom:"top",left:"right",right:"left"},Se={start:"end",center:"center",end:"start"},se={top:"height",bottom:"height",left:"width",right:"width"},zt={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},At={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Bt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},Ee={top:!0,bottom:!1,left:!0,right:!1},Te={top:"end",bottom:"start",left:"end",right:"start"};function Ft(n,e,t,r,o,i){if(!o||i)return{placement:n,top:0,left:0};const[u,d]=n.split("-");let s=d??"center",h={top:0,left:0};const v=(m,g,b)=>{let a=0,l=0;const x=t[m]-e[g]-e[m];return x>0&&r&&(b?l=Ee[g]?x:-x:a=Ee[g]?x:-x),{left:a,top:l}},y=u==="left"||u==="right";if(s!=="center"){const m=Bt[n],g=J[m],b=se[m];if(t[b]>e[b]){if(e[m]+e[b]<t[b]){const a=(t[b]-e[b])/2;e[m]<a||e[g]<a?e[m]<e[g]?(s=Se[d],h=v(b,g,y)):h=v(b,m,y):s="center"}}else t[b]<e[b]&&e[g]<0&&e[m]>e[g]&&(s=Se[d])}else{const m=u==="bottom"||u==="top"?"left":"top",g=J[m],b=se[m],a=(t[b]-e[b])/2;(e[m]<a||e[g]<a)&&(e[m]>e[g]?(s=Te[m],h=v(b,m,y)):(s=Te[g],h=v(b,g,y)))}let c=u;return e[u]<t[se[u]]&&e[u]<e[J[u]]&&(c=J[u]),{placement:s!=="center"?`${c}-${s}`:c,left:h.left,top:h.top}}function Ct(n,e){return e?At[n]:zt[n]}function It(n,e,t,r,o,i){if(i)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+o)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+o)}px`,transform:"translateX(-50%)"}}}const Ot=I([I(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),I(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[I("> *",{pointerEvents:"all"})])]),Qt=k({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=pe("VBinder"),t=fe(()=>n.enabled!==void 0?n.enabled:n.show),r=C(null),o=C(null),i=()=>{const{syncTrigger:c}=n;c.includes("scroll")&&e.addScrollListener(s),c.includes("resize")&&e.addResizeListener(s)},u=()=>{e.removeScrollListener(s),e.removeResizeListener(s)};K(()=>{t.value&&(s(),i())});const d=ne();Ot.mount({id:"vueuc/binder",head:!0,anchorMetaName:re,ssr:d}),te(()=>{u()}),tt(()=>{t.value&&s()});const s=()=>{if(!t.value)return;const c=r.value;if(c===null)return;const m=e.targetRef,{x:g,y:b,overlap:a}=n,l=g!==void 0&&b!==void 0?lt(g,b):le(m);c.style.setProperty("--v-target-width",`${Math.round(l.width)}px`),c.style.setProperty("--v-target-height",`${Math.round(l.height)}px`);const{width:x,minWidth:$,placement:F,internalShift:W,flip:_}=n;c.setAttribute("v-placement",F),a?c.setAttribute("v-overlap",""):c.removeAttribute("v-overlap");const{style:z}=c;x==="target"?z.width=`${l.width}px`:x!==void 0?z.width=x:z.width="",$==="target"?z.minWidth=`${l.width}px`:$!==void 0?z.minWidth=$:z.minWidth="";const X=le(c),L=le(o.value),{left:H,top:f,placement:p}=Ft(F,l,X,W,_,a),w=Ct(p,a),{left:M,top:S,transform:T}=It(p,L,l,f,H,a);c.setAttribute("v-placement",p),c.style.setProperty("--v-offset-left",`${Math.round(H)}px`),c.style.setProperty("--v-offset-top",`${Math.round(f)}px`),c.style.transform=`translateX(${M}) translateY(${S}) ${T}`,c.style.setProperty("--v-transform-origin",w),c.style.transformOrigin=w};P(t,c=>{c?(i(),h()):u()});const h=()=>{Oe().then(s).catch(c=>console.error(c))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(c=>{P(ee(n,c),s)}),["teleportDisabled"].forEach(c=>{P(ee(n,c),h)}),P(ee(n,"syncTrigger"),c=>{c.includes("resize")?e.addResizeListener(s):e.removeResizeListener(s),c.includes("scroll")?e.addScrollListener(s):e.removeScrollListener(s)});const v=nt(),y=fe(()=>{const{to:c}=n;if(c!==void 0)return c;v.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:o,followerRef:r,mergedTo:y,syncPosition:s}},render(){return A(Tt,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=A("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[A("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?Ie(t,[[rt,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});class kt{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||ot)(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const r=this.elHandlersMap.get(t.target);r!==void 0&&r(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){this.elHandlersMap.has(e)&&(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}const ze=new kt,Ae=k({name:"ResizeObserver",props:{onResize:Function},setup(n){let e=!1;const t=Ce().proxy;function r(o){const{onResize:i}=n;i!==void 0&&i(o)}K(()=>{const o=t.$el;if(o===void 0){ge("resize-observer","$el does not exist.");return}if(o.nextElementSibling!==o.nextSibling&&o.nodeType===3&&o.nodeValue!==""){ge("resize-observer","$el can not be observed (it may be a text node).");return}o.nextElementSibling!==null&&(ze.registerHandler(o.nextElementSibling,r),e=!0)}),te(()=>{e&&ze.unregisterHandler(t.$el.nextElementSibling)})},render(){return ke(this.$slots,"default")}});let R;function Wt(){return typeof document>"u"?!1:(R===void 0&&("matchMedia"in window?R=window.matchMedia("(pointer:coarse)").matches:R=!1),R)}let ue;function Be(){return typeof document>"u"?1:(ue===void 0&&(ue="chrome"in window?window.devicePixelRatio:1),ue)}const Lt=I(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[I("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[I("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),Zt=k({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=ne();Lt.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:re,ssr:e}),K(()=>{const{defaultScrollIndex:f,defaultScrollKey:p}=n;f!=null?g({index:f}):p!=null&&g({key:p})});let t=!1,r=!1;Ge(()=>{if(t=!1,!r){r=!0;return}g({top:y.value,left:v})}),Qe(()=>{t=!0,r||(r=!0)});const o=j(()=>{const f=new Map,{keyField:p}=n;return n.items.forEach((w,M)=>{f.set(w[p],M)}),f}),i=C(null),u=C(void 0),d=new Map,s=j(()=>{const{items:f,itemSize:p,keyField:w}=n,M=new Et(f.length,p);return f.forEach((S,T)=>{const E=S[w],B=d.get(E);B!==void 0&&M.add(T,B)}),M}),h=C(0);let v=0;const y=C(0),c=fe(()=>Math.max(s.value.getBound(y.value-ve(n.paddingTop))-1,0)),m=j(()=>{const{value:f}=u;if(f===void 0)return[];const{items:p,itemSize:w}=n,M=c.value,S=Math.min(M+Math.ceil(f/w+1),p.length-1),T=[];for(let E=M;E<=S;++E)T.push(p[E]);return T}),g=(f,p)=>{if(typeof f=="number"){x(f,p,"auto");return}const{left:w,top:M,index:S,key:T,position:E,behavior:B,debounce:V=!0}=f;if(w!==void 0||M!==void 0)x(w,M,B);else if(S!==void 0)l(S,B,V);else if(T!==void 0){const oe=o.value.get(T);oe!==void 0&&l(oe,B,V)}else E==="bottom"?x(0,Number.MAX_SAFE_INTEGER,B):E==="top"&&x(0,0,B)};let b,a=null;function l(f,p,w){const{value:M}=s,S=M.sum(f)+ve(n.paddingTop);if(!w)i.value.scrollTo({left:0,top:S,behavior:p});else{b=f,a!==null&&window.clearTimeout(a),a=window.setTimeout(()=>{b=void 0,a=null},16);const{scrollTop:T,offsetHeight:E}=i.value;if(S>T){const B=M.get(f);S+B<=T+E||i.value.scrollTo({left:0,top:S+B-E,behavior:p})}else i.value.scrollTo({left:0,top:S,behavior:p})}}function x(f,p,w){i.value.scrollTo({left:f,top:p,behavior:w})}function $(f,p){var w,M,S;if(t||n.ignoreItemResize||H(p.target))return;const{value:T}=s,E=o.value.get(f),B=T.get(E),V=(S=(M=(w=p.borderBoxSize)===null||w===void 0?void 0:w[0])===null||M===void 0?void 0:M.blockSize)!==null&&S!==void 0?S:p.contentRect.height;if(V===B)return;V-n.itemSize===0?d.delete(f):d.set(f,V-n.itemSize);const N=V-B;if(N===0)return;T.add(E,N);const D=i.value;if(D!=null){if(b===void 0){const ie=T.sum(E);D.scrollTop>ie&&D.scrollBy(0,N)}else if(E<b)D.scrollBy(0,N);else if(E===b){const ie=T.sum(E);V+ie>D.scrollTop+D.offsetHeight&&D.scrollBy(0,N)}L()}h.value++}const F=!Wt();let W=!1;function _(f){var p;(p=n.onScroll)===null||p===void 0||p.call(n,f),(!F||!W)&&L()}function z(f){var p;if((p=n.onWheel)===null||p===void 0||p.call(n,f),F){const w=i.value;if(w!=null){if(f.deltaX===0&&(w.scrollTop===0&&f.deltaY<=0||w.scrollTop+w.offsetHeight>=w.scrollHeight&&f.deltaY>=0))return;f.preventDefault(),w.scrollTop+=f.deltaY/Be(),w.scrollLeft+=f.deltaX/Be(),L(),W=!0,We(()=>{W=!1})}}}function X(f){if(t||H(f.target)||f.contentRect.height===u.value)return;u.value=f.contentRect.height;const{onResize:p}=n;p!==void 0&&p(f)}function L(){const{value:f}=i;f!=null&&(y.value=f.scrollTop,v=f.scrollLeft)}function H(f){let p=f;for(;p!==null;){if(p.style.display==="none")return!0;p=p.parentElement}return!1}return{listHeight:u,listStyle:{overflow:"auto"},keyToIndex:o,itemsStyle:j(()=>{const{itemResizable:f}=n,p=G(s.value.sum());return h.value,[n.itemsStyle,{boxSizing:"content-box",height:f?"":p,minHeight:f?p:"",paddingTop:G(n.paddingTop),paddingBottom:G(n.paddingBottom)}]}),visibleItemsStyle:j(()=>(h.value,{transform:`translateY(${G(s.value.sum(c.value))})`})),viewportItems:m,listElRef:i,itemsElRef:C(null),scrollTo:g,handleListResize:X,handleListScroll:_,handleListWheel:z,handleItemResize:$}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:r}=this;return A(Ae,{onResize:this.handleListResize},{default:()=>{var o,i;return A("div",Ze(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?A("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[A(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(u=>{const d=u[e],s=t.get(d),h=this.$slots.default({item:u,index:s})[0];return n?A(Ae,{key:d,onResize:v=>this.handleItemResize(d,v)},{default:()=>h}):(h.key=d,h)})})]):(i=(o=this.$slots).empty)===null||i===void 0?void 0:i.call(o)])}})}}),Ht=I(".v-x-scroll",{overflow:"auto",scrollbarWidth:"none"},[I("&::-webkit-scrollbar",{width:0,height:0})]),Jt=k({name:"XScroll",props:{disabled:Boolean,onScroll:Function},setup(){const n=C(null);function e(o){!(o.currentTarget.offsetWidth<o.currentTarget.scrollWidth)||o.deltaY===0||(o.currentTarget.scrollLeft+=o.deltaY+o.deltaX,o.preventDefault())}const t=ne();return Ht.mount({id:"vueuc/x-scroll",head:!0,anchorMetaName:re,ssr:t}),Object.assign({selfRef:n,handleWheel:e},{scrollTo(...o){var i;(i=n.value)===null||i===void 0||i.scrollTo(...o)}})},render(){return A("div",{ref:"selfRef",onScroll:this.onScroll,onWheel:this.disabled?void 0:this.handleWheel,class:"v-x-scroll"},this.$slots)}}),O="v-hidden",Vt=I("[v-hidden]",{display:"none!important"}),Rt=k({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(n,{slots:e}){const t=C(null),r=C(null);function o(u){const{value:d}=t,{getCounter:s,getTail:h}=n;let v;if(s!==void 0?v=s():v=r.value,!d||!v)return;v.hasAttribute(O)&&v.removeAttribute(O);const{children:y}=d;if(u.showAllItemsBeforeCalculate)for(const $ of y)$.hasAttribute(O)&&$.removeAttribute(O);const c=d.offsetWidth,m=[],g=e.tail?h==null?void 0:h():null;let b=g?g.offsetWidth:0,a=!1;const l=d.children.length-(e.tail?1:0);for(let $=0;$<l-1;++$){if($<0)continue;const F=y[$];if(a){F.hasAttribute(O)||F.setAttribute(O,"");continue}else F.hasAttribute(O)&&F.removeAttribute(O);const W=F.offsetWidth;if(b+=W,m[$]=W,b>c){const{updateCounter:_}=n;for(let z=$;z>=0;--z){const X=l-1-z;_!==void 0?_(X):v.textContent=`${X}`;const L=v.offsetWidth;if(b-=m[z],b+L<=c||z===0){a=!0,$=z-1,g&&($===-1?(g.style.maxWidth=`${c-L}px`,g.style.boxSizing="border-box"):g.style.maxWidth="");const{onUpdateCount:H}=n;H&&H(X);break}}}}const{onUpdateOverflow:x}=n;a?x!==void 0&&x(!0):(x!==void 0&&x(!1),v.setAttribute(O,""))}const i=ne();return Vt.mount({id:"vueuc/overflow",head:!0,anchorMetaName:re,ssr:i}),K(()=>o({showAllItemsBeforeCalculate:!1})),{selfRef:t,counterRef:r,sync:o}},render(){const{$slots:n}=this;return Oe(()=>this.sync({showAllItemsBeforeCalculate:!1})),A("div",{class:"v-overflow",ref:"selfRef"},[ke(n,"default"),n.counter?n.counter():A("span",{style:{display:"inline-block"},ref:"counterRef"}),n.tail?n.tail():null])}});function De(n){return n instanceof HTMLElement}function _e(n){for(let e=0;e<n.childNodes.length;e++){const t=n.childNodes[e];if(De(t)&&(Ne(t)||_e(t)))return!0}return!1}function je(n){for(let e=n.childNodes.length-1;e>=0;e--){const t=n.childNodes[e];if(De(t)&&(Ne(t)||je(t)))return!0}return!1}function Ne(n){if(!Yt(n))return!1;try{n.focus({preventScroll:!0})}catch{}return document.activeElement===n}function Yt(n){if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.getAttribute("disabled"))return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return n.type!=="hidden"&&n.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let U=[];const en=k({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(n){const e=Je(),t=C(null),r=C(null);let o=!1,i=!1;const u=typeof document>"u"?null:document.activeElement;function d(){return U[U.length-1]===e}function s(a){var l;a.code==="Escape"&&d()&&((l=n.onEsc)===null||l===void 0||l.call(n,a))}K(()=>{P(()=>n.active,a=>{a?(y(),ae("keydown",document,s)):(q("keydown",document,s),o&&c())},{immediate:!0})}),te(()=>{q("keydown",document,s),o&&c()});function h(a){if(!i&&d()){const l=v();if(l===null||l.contains(Re(a)))return;m("first")}}function v(){const a=t.value;if(a===null)return null;let l=a;for(;l=l.nextSibling,!(l===null||l instanceof Element&&l.tagName==="DIV"););return l}function y(){var a;if(!n.disabled){if(U.push(e),n.autoFocus){const{initialFocusTo:l}=n;l===void 0?m("first"):(a=Me(l))===null||a===void 0||a.focus({preventScroll:!0})}o=!0,document.addEventListener("focus",h,!0)}}function c(){var a;if(n.disabled||(document.removeEventListener("focus",h,!0),U=U.filter(x=>x!==e),d()))return;const{finalFocusTo:l}=n;l!==void 0?(a=Me(l))===null||a===void 0||a.focus({preventScroll:!0}):n.returnFocusOnDeactivated&&u instanceof HTMLElement&&(i=!0,u.focus({preventScroll:!0}),i=!1)}function m(a){if(d()&&n.active){const l=t.value,x=r.value;if(l!==null&&x!==null){const $=v();if($==null||$===x){i=!0,l.focus({preventScroll:!0}),i=!1;return}i=!0;const F=a==="first"?_e($):je($);i=!1,F||(i=!0,l.focus({preventScroll:!0}),i=!1)}}}function g(a){if(i)return;const l=v();l!==null&&(a.relatedTarget!==null&&l.contains(a.relatedTarget)?m("last"):m("first"))}function b(a){i||(a.relatedTarget!==null&&a.relatedTarget===t.value?m("last"):m("first"))}return{focusableStartRef:t,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:g,handleEndFocus:b}},render(){const{default:n}=this.$slots;if(n===void 0)return null;if(this.disabled)return n();const{active:e,focusableStyle:t}=this;return A(Fe,null,[A("div",{"aria-hidden":"true",tabindex:e?"0":"-1",ref:"focusableStartRef",style:t,onFocus:this.handleStartFocus}),n(),A("div",{"aria-hidden":"true",style:t,ref:"focusableEndRef",tabindex:e?"0":"-1",onFocus:this.handleEndFocus})])}});export{Kt as B,en as F,Tt as L,Ae as V,Zt as a,Qt as b,Gt as c,Rt as d,Jt as e,ze as r};
