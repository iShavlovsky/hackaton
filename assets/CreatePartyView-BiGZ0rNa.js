import{R as ae}from"./vue-router-Ckoesiwk.js";import{a as B}from"./abi-Bp99HW0C.js";import{a as ne,e as oe,f as ie}from"./@wagmi-Mrh7Gowl.js";import{f as le,g as re,P as de,T as ce,A as ue}from"./@vicons-D7ptmEij.js";import{u as pe,a as me,N as _e,s as ve,t as he,e as fe,o as ye}from"./naive-ui-ZfQSKBF9.js";import{e as ge,r as y,q as xe,b as F,c as g,w as C,a0 as U,a1 as c,u as r,f as _,j as e,a2 as o,s as j,a3 as d,a5 as be,g as x,Y as R,F as S,Q as T}from"./@vue-CA14Bhfh.js";import"./zustand-23CcGmLH.js";import"./viem-L8n_iVy8.js";import"./eventemitter3-BYCAYZDL.js";import"./@babel-B0IGr_Mv.js";import"./mipd-CIcDX0W7.js";import"./@tanstack-Dj03aQiD.js";import"./seemly-D2wyWRjj.js";import"./vooks-5LbGPu-y.js";import"./evtd-CI_DDEu_.js";import"./lodash-es-D1IKaXUS.js";import"./vueuc-DvhC_adR.js";import"./@css-render-DNgWC2BO.js";import"./vdirs-Bxp-63WN.js";import"./@juggle-C8OzoCMD.js";import"./@emotion-WldOFDRm.js";import"./treemate-BD4Oer00.js";import"./date-fns-ByyCCKXE.js";import"./date-fns-tz-D_KSBUZx.js";import"./async-validator-DKvM95Vc.js";const we={class:"container main-container-padding"},Me=e("p",null,"Back",-1),Ce={class:"container main-container-padding max-w-648"},Pe=e("div",{class:"display-grid gap-16 text-center"},[e("h1",{class:"text-40px"},"Create party"),e("p",{class:"op-06"},"Unite with others to increase reward")],-1),ke={class:"display-grid gap-16 mt-40"},Ie={class:"party-form-w display-grid gap-32"},$e=e("h2",{class:"text-accent-900 text-center"},"Party details",-1),ze={class:"display-grid gap-8"},Ne={class:"party-form-w display-grid gap-32"},Ae=e("h2",{class:"text-accent-900 text-center"},"Your share",-1),Be={class:"you-share-w display-grid grid-cols-2 gap-32"},Fe={class:"display-flex gap-12 align-items-center"},Ue={class:"ico-w"},je={class:"display-grid gap-2"},Re=e("p",{class:"text-12px op-06"},"Your wallet",-1),Se={class:"text-14px"},Te={class:"party-form-w display-grid gap-32"},We=e("h2",{class:"text-accent-900 text-center"},"Party members",-1),De={class:"display-grid gap-8"},Ee={class:"display-flex gap-16"},Ve={class:"display-flex member-revenue-w"},qe={class:"op-06"},Ye={class:"display-grid gap-2"},Le={class:"text-16px op-06"},Oe={class:"display-flex gap-16"},Ge=["onClick"],Ke=["onClick"],Qe={class:"display-flex gap-16 align-items-center"},He={class:"display-flex member-revenue-w add-member-ico"},Je=e("span",null,"Add type of members",-1),Xe={class:"party-form-w party-no-bg display-grid gap-32"},Ze=e("h2",{class:"text-16px text-center"},"Your revenue will be distributed like this:",-1),et={class:"revenue-distributed-w display-flex gap-8"},tt={class:"revenue-distributed-info display-grid gap-2"},st=e("p",{class:"text-16px op-06"},"@malamuth (you)",-1),at={class:"revenue-distributed-info display-grid gap-2"},nt={class:"text-16px op-06"},ot=e("span",null,"Create party",-1),it=[ot],lt=e("div",null,null,-1),rt={class:"quests-card-modal-content p-tb-24px mt-40"},dt=e("h1",{class:"text-center"},"Add type of members",-1),ct={class:"display-grid gap-8 mt-40"},St=ge({__name:"CreatePartyView",setup(ut){const P="0x3aE5995509df0Bd125bA20593aA8A945E520e714",u=pe(),{isConnected:k,address:b,chainId:I}=ne(),p=y(!1),v=y(-1);function W(){return Math.random().toString(36).substring(7)}const D=y("createRS"),w=y([]),{data:E,error:V,isPending:q,isSuccess:Y,isError:L,writeContract:O}=oe(),G=()=>{H.value?O({abi:B,chainId:I.value,address:P,account:b.value,functionName:D.value,...w.value&&w.value.length?{args:w.value}:{}}):u.warning("Fill in all the fields")},{data:$,refetch:K}=ie({abi:B,chainId:I.value,address:P,account:b.value,functionName:"lastPartyId",query:{enabled:!0}}),z=async()=>{await K(),u.info(`last Party Id: ${$.value}`),console.log("last Party Id:",$.value)};xe(()=>{z()});const a=F({name:"",description:"",share:null,partyMembers:[{id:"asdad",name:"Telegram members",description:"Those who joined party via TG",revenue:15}]}),n=F({id:"",name:"",description:"",revenue:null}),Q=g(()=>a.partyMembers.reduce((i,s)=>i+(s.revenue??0),0)),M=g(()=>a.share?`${a.share}`:`${100-Q.value}`),H=g(()=>!!a.name&&a.description&&a.share),J=g(()=>!!n.name&&n.description&&n.revenue),N=()=>{n.id="",n.name="",n.description="",n.revenue=null},X=i=>{const s=a.partyMembers.findIndex(l=>l.id===i.id);if(s!==-1){v.value=s,p.value=!0;const{id:l,name:m,description:h,revenue:f}=i;Object.assign(n,{id:l,name:m,description:h,revenue:f})}},Z=()=>{if(J.value){if(v.value>=0)a.partyMembers[v.value]={...n},v.value=-1;else{const i={id:W(),name:n.name,description:n.description,revenue:n.revenue};a.partyMembers.push(i)}p.value=!1,N(),u.success("Party members created")}else u.warning("Fill in all fields correctly")},ee=i=>{const s=a.partyMembers.findIndex(l=>l.id===i);s!==-1&&a.partyMembers.splice(s,1)};return C(()=>p.value,i=>{i||N()}),C(()=>Y.value,()=>{u.success(`Done ${E.value}`),z()}),C(()=>L.value,()=>{var i;u.error(`Error ${(i=V.value)==null?void 0:i.message}`)}),(i,s)=>{const l=_e,m=ve,h=he,f=fe,A=me,te=ye;return _(),U(A,{show:r(q)},{default:c(()=>[e("section",null,[e("div",we,[o(r(ae),{class:"display-flex align-items-center",to:"/"},{default:c(()=>[o(l,{component:r(le),depth:1,size:24,color:"#fff"},null,8,["component"]),Me]),_:1})])]),e("section",null,[e("div",Ce,[Pe,e("div",ke,[e("div",Ie,[$e,e("div",ze,[o(m,{value:a.name,"onUpdate:value":s[0]||(s[0]=t=>a.name=t),valueModifiers:{trim:!0},path:"user.name",placeholder:"Name",size:"large",type:"text"},null,8,["value"]),o(m,{value:a.description,"onUpdate:value":s[1]||(s[1]=t=>a.description=t),valueModifiers:{trim:!0},placeholder:"Description",size:"large",type:"text"},null,8,["value"])])]),e("div",Ne,[Ae,e("div",Be,[o(h,{value:a.share,"onUpdate:value":s[2]||(s[2]=t=>a.share=t),valueModifiers:{trim:!0},"default-value":null,max:100,min:1,placeholder:`${M.value}%`,"show-button":!1,step:1,size:"large"},null,8,["value","placeholder"]),e("div",Fe,[e("div",Ue,[o(l,{component:r(re),depth:1,size:16,color:"#fff"},null,8,["component"])]),e("div",je,[o(A,{show:!r(k)},{default:c(()=>[Re,e("p",Se,[r(k)?(_(),U(f,{key:0,tooltip:!0,style:{"max-width":"100px",color:"white"}},{default:c(()=>[j(d(r(b)),1)]),_:1})):be("",!0)])]),_:1},8,["show"])])])])]),e("div",Te,[We,e("div",De,[(_(!0),x(S,null,R(a.partyMembers,t=>(_(),x("div",{key:t.id,class:"add-member display-flex justify-between align-items-center"},[e("div",Ee,[e("div",Ve,[e("p",qe,d(t.revenue)+"%",1)]),e("div",Ye,[e("p",null,d(t.name),1),e("p",Le,d(t.description),1)])]),e("div",Oe,[e("button",{class:"main-custom-btn gray-btn",type:"button",onClick:se=>X(t)},[e("span",null,[o(l,{component:r(de),depth:1,size:16,color:"#fff"},null,8,["component"])])],8,Ge),e("button",{class:"main-custom-btn red-btn",type:"button",onClick:se=>ee(t.id)},[e("span",null,[o(l,{component:r(ce),depth:1,size:16,color:"#fff"},null,8,["component"])])],8,Ke)])]))),128)),e("button",{class:"add-member text-left display-flex justify-between align-items-center",onClick:s[3]||(s[3]=t=>p.value=!0)},[e("span",Qe,[e("span",He,[e("span",null,[o(l,{component:r(ue),depth:1,size:24,color:"#fff"},null,8,["component"])])]),Je])])])]),e("div",Xe,[Ze,e("div",et,[e("div",{style:T({maxWidth:`${M.value}%`,minWidth:"10%"}),class:"revenue-distributed-holder display-flex align-items-center justify-center"},[e("div",tt,[e("p",null,d(M.value)+"%",1),st])],4),(_(!0),x(S,null,R(a.partyMembers,t=>(_(),x("div",{key:t.id,style:T({maxWidth:`${t.revenue}%`,minWidth:"10%"}),class:"revenue-distributed-holder display-flex align-items-center justify-center"},[e("div",at,[e("p",null,d(t.revenue)+"%",1),e("p",nt,[o(f,{tooltip:!0,style:{"max-width":"150px"}},{default:c(()=>[j(d(t.name),1)]),_:2},1024)])])],4))),128))]),e("div",{class:"mt-80 width-full"},[e("button",{class:"main-custom-btn width-full",type:"button",onClick:G},it)])])])]),o(te,{show:p.value,"onUpdate:show":s[7]||(s[7]=t=>p.value=t),class:"quest-custom-modal min-w-648",preset:"dialog",title:"Dialog"},{header:c(()=>[lt]),default:c(()=>[e("div",rt,[dt,e("div",ct,[o(m,{value:n.name,"onUpdate:value":s[4]||(s[4]=t=>n.name=t),valueModifiers:{trim:!0},placeholder:"Name",size:"large",type:"text"},null,8,["value"]),o(m,{value:n.description,"onUpdate:value":s[5]||(s[5]=t=>n.description=t),valueModifiers:{trim:!0},placeholder:"Description",size:"large",type:"text"},null,8,["value"]),o(h,{value:n.revenue,"onUpdate:value":s[6]||(s[6]=t=>n.revenue=t),valueModifiers:{trim:!0},"default-value":null,max:a.share?100-a.share:100,min:1,placeholder:`Revenue share max ${a.share?100-a.share:100}% `,"show-button":!1,step:1,size:"large"},null,8,["value","max","placeholder"]),e("button",{class:"main-custom-btn width-full",type:"button",onClick:Z},[e("span",null,d(v.value>=0?"Save":"Add"),1)])])])]),_:1},8,["show"])])]),_:1},8,["show"])}}});export{St as default};
