import{c as N,s as fe,p as he}from"./zustand-D8op8QDx.js";import{g as E,U as j,R as x,w as me,a as pe,S as Z,n as X,c as ge,b as ye,m as we,r as be,C as ce,h as ve,t as Ie,f as ie,d as Ce}from"./viem-ZtY1dojO.js";import{E as Se}from"./eventemitter3-BYCAYZDL.js";import{c as _e}from"./mipd-CIcDX0W7.js";const Oe="modulepreload",je=function(e){return"/hackaton/"+e},Y={},ct=function(n,t,r){let c=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));c=Promise.all(t.map(u=>{if(u=je(u),u in Y)return;Y[u]=!0;const l=u.endsWith(".css"),i=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${i}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":Oe,l||(f.as="script",f.crossOrigin=""),f.href=u,o&&f.setAttribute("nonce",o),document.head.appendChild(f),l)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}return c.then(()=>n()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};class Pe{constructor(n){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Se})}on(n,t){this._emitter.on(n,t)}once(n,t){this._emitter.once(n,t)}off(n,t){this._emitter.off(n,t)}emit(n,...t){const r=t[0];this._emitter.emit(n,{uid:this.uid,...r})}listenerCount(n){return this._emitter.listenerCount(n)}}function Me(e){return new Pe(e)}function ke(e,n){return JSON.parse(e,(t,r)=>{let c=r;return(c==null?void 0:c.__type)==="bigint"&&(c=BigInt(c.value)),(c==null?void 0:c.__type)==="Map"&&(c=new Map(c.value)),(n==null?void 0:n(t,c))??c})}function ee(e,n){return e.slice(0,n).join(".")||"."}function te(e,n){const{length:t}=e;for(let r=0;r<t;++r)if(e[r]===n)return r+1;return 0}function Ae(e,n){const t=typeof e=="function",r=typeof n=="function",c=[],s=[];return function(u,l){if(typeof l=="object")if(c.length){const i=te(c,this);i===0?c[c.length]=this:(c.splice(i),s.splice(i)),s[s.length]=u;const f=te(c,l);if(f!==0)return r?n.call(this,u,l,ee(s,f)):`[ref=${ee(s,f)}]`}else c[0]=l,s[0]=u;return t?e.call(this,u,l):l}}function $e(e,n,t,r){return JSON.stringify(e,Ae((c,s)=>{let o=s;return typeof o=="bigint"&&(o={__type:"bigint",value:s.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(s.entries())}),(n==null?void 0:n(c,o))??o},r),t??void 0)}function Ee(e){const{deserialize:n=ke,key:t="wagmi",serialize:r=$e,storage:c=se}=e;function s(o){return o instanceof Promise?o.then(u=>u).catch(()=>null):o}return{...c,key:t,async getItem(o,u){const l=c.getItem(`${t}.${o}`),i=await s(l);return i?n(i)??null:u??null},async setItem(o,u){const l=`${t}.${o}`;u===null?await s(c.removeItem(l)):await s(c.setItem(l,r(u)))},async removeItem(o){await s(c.removeItem(`${t}.${o}`))}}}const se={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};const B="2.10.4",qe=()=>`@wagmi/core@${B}`;var oe=function(e,n,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!r:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(e):r?r.value:n.get(e)},D,ae;let V=class L extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return qe()}constructor(n,t={}){var s;super(),D.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=t.cause instanceof L?t.cause.details:(s=t.cause)!=null&&s.message?t.cause.message:t.details,c=t.cause instanceof L&&t.cause.docsPath||t.docsPath;this.message=[n||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...c?[`Docs: ${this.docsBaseUrl}${c}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=c,this.metaMessages=t.metaMessages,this.shortMessage=n}walk(n){return oe(this,D,"m",ae).call(this,this,n)}};D=new WeakSet,ae=function e(n,t){return t!=null&&t(n)?n:n.cause?oe(this,D,"m",e).call(this,n.cause,t):n};class K extends V{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Ue extends V{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class A extends V{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}const Re=/(rabby|trustwallet)/,Be={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(e){return e!=null&&e.coinbaseWalletExtension?e.coinbaseWalletExtension:W(e,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(e){return W(e,n=>{if(!n.isMetaMask||n.isBraveWallet&&!n._events&&!n._state)return!1;const t=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPortal","isRabby","isTokenPocket","isTokenary","isZerion"];for(const r of t)if(n[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(e){var n,t;return(n=e==null?void 0:e.phantom)!=null&&n.ethereum?(t=e.phantom)==null?void 0:t.ethereum:W(e,"isPhantom")}}};J.type="injected";function J(e={}){const{shimDisconnect:n=!0,unstable_shimAsyncInject:t}=e;function r(){const l=e.target;if(typeof l=="function"){const i=l();if(i)return i}return typeof l=="object"?l:typeof l=="string"?{...Be[l]??{id:l,name:`${l[0].toUpperCase()}${l.slice(1)}`,provider:`is${l[0].toUpperCase()}${l.slice(1)}`}}:{id:"injected",name:"Injected",provider(i){return i==null?void 0:i.ethereum}}}let c,s,o,u;return l=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return Re.test(this.id.toLowerCase())},type:J.type,async setup(){const i=await this.getProvider();i&&e.target&&(o||(o=this.onConnect.bind(this),i.on("connect",o)),c||(c=this.onAccountsChanged.bind(this),i.on("accountsChanged",c)))},async connect({chainId:i,isReconnecting:f}={}){var v,g,S,y,I,_;const d=await this.getProvider();if(!d)throw new A;let p=[];if(f)p=await this.getAccounts().catch(()=>[]);else if(n)try{p=(y=(S=(g=(v=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:v.caveats)==null?void 0:g[0])==null?void 0:S.value)==null?void 0:y.map(a=>E(a))}catch(C){const a=C;if(a.code===j.code)throw new j(a);if(a.code===x.code)throw a}try{!(p!=null&&p.length)&&!f&&(p=(await d.request({method:"eth_requestAccounts"})).map(m=>E(m))),o&&(d.removeListener("connect",o),o=void 0),c||(c=this.onAccountsChanged.bind(this),d.on("accountsChanged",c)),s||(s=this.onChainChanged.bind(this),d.on("chainChanged",s)),u||(u=this.onDisconnect.bind(this),d.on("disconnect",u));let C=await this.getChainId();if(i&&C!==i){const a=await this.switchChain({chainId:i}).catch(m=>{if(m.code===j.code)throw m;return{id:C}});C=(a==null?void 0:a.id)??C}return n&&await((I=l.storage)==null?void 0:I.removeItem(`${this.id}.disconnected`)),e.target||await((_=l.storage)==null?void 0:_.setItem("injected.connected",!0)),{accounts:p,chainId:C}}catch(C){const a=C;throw a.code===j.code?new j(a):a.code===x.code?new x(a):a}},async disconnect(){var f,d;const i=await this.getProvider();if(!i)throw new A;s&&(i.removeListener("chainChanged",s),s=void 0),u&&(i.removeListener("disconnect",u),u=void 0),o||(o=this.onConnect.bind(this),i.on("connect",o));try{await i.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch{}n&&await((f=l.storage)==null?void 0:f.setItem(`${this.id}.disconnected`,!0)),e.target||await((d=l.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const i=await this.getProvider();if(!i)throw new A;return(await i.request({method:"eth_accounts"})).map(d=>E(d))},async getChainId(){const i=await this.getProvider();if(!i)throw new A;const f=await i.request({method:"eth_chainId"});return Number(f)},async getProvider(){if(typeof window>"u")return;let i;const f=r();return typeof f.provider=="function"?i=f.provider(window):typeof f.provider=="string"?i=W(window,f.provider):i=f.provider,i&&!i.removeListener&&("off"in i&&typeof i.off=="function"?i.removeListener=i.off:i.removeListener=()=>{}),i},async isAuthorized(){var i,f;try{if(n&&await((i=l.storage)==null?void 0:i.getItem(`${this.id}.disconnected`))||!e.target&&!await((f=l.storage)==null?void 0:f.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(t!==void 0&&t!==!1){const g=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",g),!!await this.getProvider()),S=typeof t=="number"?t:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(I=>window.addEventListener("ethereum#initialized",()=>I(g()),{once:!0}))]:[],new Promise(I=>setTimeout(()=>I(g()),S))]))return!0}throw new A}return!!(await me(()=>pe(()=>this.getAccounts(),{timeout:100}))).length}catch{return!1}},async switchChain({addEthereumChainParameter:i,chainId:f}){var v,g,S,y;const d=await this.getProvider();if(!d)throw new A;const p=l.chains.find(I=>I.id===f);if(!p)throw new Z(new K);try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:X(f)}]}).then(async()=>{await this.getChainId()===f&&l.emitter.emit("change",{chainId:f})}),new Promise(I=>l.emitter.once("change",({chainId:_})=>{_===f&&I()}))]),p}catch(I){const _=I;if(_.code===4902||((g=(v=_==null?void 0:_.data)==null?void 0:v.originalError)==null?void 0:g.code)===4902)try{const{default:C,...a}=p.blockExplorers??{};let m;i!=null&&i.blockExplorerUrls?m=i.blockExplorerUrls:C&&(m=[C.url,...Object.values(a).map(k=>k.url)]);let h;(S=i==null?void 0:i.rpcUrls)!=null&&S.length?h=i.rpcUrls:h=[((y=p.rpcUrls.default)==null?void 0:y.http[0])??""];const w={blockExplorerUrls:m,chainId:X(f),chainName:(i==null?void 0:i.chainName)??p.name,iconUrls:i==null?void 0:i.iconUrls,nativeCurrency:(i==null?void 0:i.nativeCurrency)??p.nativeCurrency,rpcUrls:h};if(await d.request({method:"wallet_addEthereumChain",params:[w]}),await this.getChainId()!==f)throw new j(new Error("User rejected switch after adding network."));return p}catch(C){throw new j(C)}throw _.code===j.code?new j(_):new Z(_)}},async onAccountsChanged(i){var f;if(i.length===0)this.onDisconnect();else if(l.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),n&&await((f=l.storage)==null?void 0:f.removeItem(`${this.id}.disconnected`))}else l.emitter.emit("change",{accounts:i.map(d=>E(d))})},onChainChanged(i){const f=Number(i);l.emitter.emit("change",{chainId:f})},async onConnect(i){const f=await this.getAccounts();if(f.length===0)return;const d=Number(i.chainId);l.emitter.emit("connect",{accounts:f,chainId:d});const p=await this.getProvider();p&&(o&&(p.removeListener("connect",o),o=void 0),c||(c=this.onAccountsChanged.bind(this),p.on("accountsChanged",c)),s||(s=this.onChainChanged.bind(this),p.on("chainChanged",s)),u||(u=this.onDisconnect.bind(this),p.on("disconnect",u)))},async onDisconnect(i){const f=await this.getProvider();i&&i.code===1013&&f&&(await this.getAccounts()).length||(l.emitter.emit("disconnect"),f&&(s&&(f.removeListener("chainChanged",s),s=void 0),u&&(f.removeListener("disconnect",u),u=void 0),o||(o=this.onConnect.bind(this),f.on("connect",o))))}})}function W(e,n){function t(c){return typeof n=="function"?n(c):typeof n=="string"?c[n]:!0}const r=e.ethereum;if(r!=null&&r.providers)return r.providers.find(c=>t(c));if(r&&t(r))return r}const H=256;let q=H,U;function We(e=11){if(!U||q+e>H*2){U="",q=0;for(let n=0;n<H;n++)U+=(256+Math.random()*256|0).toString(16).substring(1)}return U.substring(q,q+++e)}function it(e){const{multiInjectedProviderDiscovery:n=!0,storage:t=Ee({storage:typeof window<"u"&&window.localStorage?window.localStorage:se}),syncConnectedChain:r=!0,ssr:c,...s}=e,o=typeof window<"u"&&n?_e():void 0,u=N(()=>s.chains),l=N(()=>[...s.connectors??[],...c?[]:(o==null?void 0:o.getProviders().map(f))??[]].map(i));function i(a){var w;const m=Me(We()),h={...a({emitter:m,chains:u.getState(),storage:t}),emitter:m,uid:m.uid};return m.on("connect",_),(w=h.setup)==null||w.call(h),h}function f(a){const{info:m}=a,h=a.provider;return J({target:{...m,id:m.rdns,provider:h}})}const d=new Map;function p(a={}){const m=a.chainId??y.getState().chainId,h=u.getState().find(b=>b.id===m);if(a.chainId&&!h)throw new K;{const b=d.get(y.getState().chainId);if(b&&!h)return b;if(!h)throw new K}{const b=d.get(m);if(b)return b}let w;if(s.client)w=s.client({chain:h});else{const b=h.id,k=u.getState().map(O=>O.id),P={},T=Object.entries(s);for(const[O,M]of T)if(!(O==="chains"||O==="client"||O==="connectors"||O==="transports"))if(typeof M=="object")if(b in M)P[O]=M[b];else{if(k.some(G=>G in M))continue;P[O]=M}else P[O]=M;w=ge({...P,chain:h,batch:P.batch??{multicall:!0},transport:O=>s.transports[b]({...O,connectors:l})})}return d.set(m,w),w}function v(){return{chainId:u.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let g;const S="0.0.0-canary-";B.startsWith(S)?g=parseInt(B.replace(S,"")):g=parseInt(B.split(".")[0]??"0");const y=N(fe(t?he(v,{migrate(a,m){if(m===g)return a;const h=v(),w=a&&typeof a=="object"&&"chainId"in a&&typeof a.chainId=="number"?a.chainId:h.chainId;return{...h,chainId:w}},name:"store",partialize(a){return{connections:{__type:"Map",value:Array.from(a.connections.entries()).map(([m,h])=>{const{id:w,name:b,type:k,uid:P}=h.connector;return[m,{...h,connector:{id:w,name:b,type:k,uid:P}}]})},chainId:a.chainId,current:a.current}},skipHydration:c,storage:t,version:g}):v));r&&y.subscribe(({connections:a,current:m})=>{var h;return m?(h=a.get(m))==null?void 0:h.chainId:void 0},a=>{if(u.getState().some(h=>h.id===a))return y.setState(h=>({...h,chainId:a??h.chainId}))}),o==null||o.subscribe(a=>{const m=new Map;for(const w of l.getState())m.set(w.id,!0);const h=[];for(const w of a){const b=i(f(w));m.has(b.id)||h.push(b)}t&&!y.persist.hasHydrated()||l.setState(w=>[...w,...h],!0)});function I(a){y.setState(m=>{const h=m.connections.get(a.uid);return h?{...m,connections:new Map(m.connections).set(a.uid,{accounts:a.accounts??h.accounts,chainId:a.chainId??h.chainId,connector:h.connector})}:m})}function _(a){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(m=>{const h=l.getState().find(w=>w.uid===a.uid);return h?(h.emitter.listenerCount("connect")&&h.emitter.off("connect",I),h.emitter.listenerCount("change")||h.emitter.on("change",I),h.emitter.listenerCount("disconnect")||h.emitter.on("disconnect",C),{...m,connections:new Map(m.connections).set(a.uid,{accounts:a.accounts,chainId:a.chainId,connector:h}),current:a.uid,status:"connected"}):m})}function C(a){y.setState(m=>{const h=m.connections.get(a.uid);if(h){const b=h.connector;b.emitter.listenerCount("change")&&h.connector.emitter.off("change",I),b.emitter.listenerCount("disconnect")&&h.connector.emitter.off("disconnect",C),b.emitter.listenerCount("connect")||h.connector.emitter.on("connect",_)}if(m.connections.delete(a.uid),m.connections.size===0)return{...m,connections:new Map,current:null,status:"disconnected"};const w=m.connections.values().next().value;return{...m,connections:new Map(m.connections),current:w.connector.uid}})}return{get chains(){return u.getState()},get connectors(){return l.getState()},storage:t,getClient:p,get state(){return y.getState()},setState(a){let m;typeof a=="function"?m=a(y.getState()):m=a;const h=v();typeof m!="object"&&(m=h),Object.keys(h).some(b=>!(b in m))&&(m=h),y.setState(m,!0)},subscribe(a,m,h){return y.subscribe(a,m,h?{...h,fireImmediately:h.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!c,syncConnectedChain:r,transports:s.transports,chains:{setState(a){const m=typeof a=="function"?a(u.getState()):a;if(m.length!==0)return u.setState(m,!0)},subscribe(a){return u.subscribe(a)}},connectors:{providerDetailToConnector:f,setup:i,setState(a){return l.setState(typeof a=="function"?a(l.getState()):a,!0)},subscribe(a){return l.subscribe(a)}},events:{change:I,connect:_,disconnect:C}}}}function Q(e,n,t){const r=e[n.name];if(typeof r=="function")return r;const c=e[t];return typeof c=="function"?c:s=>n(e,s)}async function De(e,n){var r;let t;if(typeof n.connector=="function"?t=e._internal.connectors.setup(n.connector):t=n.connector,t.uid===e.state.current)throw new Ue;try{e.setState(o=>({...o,status:"connecting"})),t.emitter.emit("message",{type:"connecting"});const c=await t.connect({chainId:n.chainId}),s=c.accounts;return t.emitter.off("connect",e._internal.events.connect),t.emitter.on("change",e._internal.events.change),t.emitter.on("disconnect",e._internal.events.disconnect),await((r=e.storage)==null?void 0:r.setItem("recentConnectorId",t.id)),e.setState(o=>({...o,connections:new Map(o.connections).set(t.uid,{accounts:s,chainId:c.chainId,connector:t}),current:t.uid,status:"connected"})),{accounts:s,chainId:c.chainId}}catch(c){throw e.setState(s=>({...s,status:s.current?"connected":"disconnected"})),c}}async function Te(e,n={}){var c,s;let t;if(n.connector)t=n.connector;else{const{connections:o,current:u}=e.state,l=o.get(u);t=l==null?void 0:l.connector}const r=e.state.connections;t&&(await t.disconnect(),t.emitter.off("change",e._internal.events.change),t.emitter.off("disconnect",e._internal.events.disconnect),t.emitter.on("connect",e._internal.events.connect),r.delete(t.uid)),e.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const u=r.values().next().value;return{...o,connections:new Map(r),current:u.connector.uid}});{const o=e.state.current;if(!o)return;const u=(c=e.state.connections.get(o))==null?void 0:c.connector;if(!u)return;await((s=e.storage)==null?void 0:s.setItem("recentConnectorId",u.id))}}function ue(e){return typeof e=="number"?e:e==="wei"?0:Math.abs(ye[e])}function Ne(e){const n=e.state.current,t=e.state.connections.get(n),r=t==null?void 0:t.accounts,c=r==null?void 0:r[0],s=e.chains.find(u=>u.id===(t==null?void 0:t.chainId)),o=e.state.status;switch(o){case"connected":return{address:c,addresses:r,chain:s,chainId:t==null?void 0:t.chainId,connector:t==null?void 0:t.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:c,addresses:r,chain:s,chainId:t==null?void 0:t.chainId,connector:t==null?void 0:t.connector,isConnected:!!c,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:c,addresses:r,chain:s,chainId:t==null?void 0:t.chainId,connector:t==null?void 0:t.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function xe(e,n){const{allowFailure:t=!0,chainId:r,contracts:c,...s}=n,o=e.getClient({chainId:r});return Q(o,we,"multicall")({allowFailure:t,contracts:c,...s})}function ze(e,n){const{chainId:t,...r}=n,c=e.getClient({chainId:t});return Q(c,be,"readContract")(r)}async function Fe(e,n){const{allowFailure:t=!0,blockNumber:r,blockTag:c,...s}=n,o=n.contracts;try{const u=o.reduce((d,p,v)=>{const g=p.chainId??e.state.chainId;return{...d,[g]:[...d[g]||[],{contract:p,index:v}]}},{}),l=()=>Object.entries(u).map(([d,p])=>xe(e,{...s,allowFailure:t,blockNumber:r,blockTag:c,chainId:parseInt(d),contracts:p.map(({contract:v})=>v)})),i=(await Promise.all(l())).flat(),f=Object.values(u).flatMap(d=>d.map(({index:p})=>p));return i.reduce((d,p,v)=>(d&&(d[f[v]]=p),d),[])}catch(u){if(u instanceof ce)throw u;const l=()=>o.map(i=>ze(e,{...i,blockNumber:r,blockTag:c}));return t?(await Promise.allSettled(l())).map(i=>i.status==="fulfilled"?{result:i.value,status:"success"}:{error:i.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Le(e,n){const{address:t,blockNumber:r,blockTag:c,chainId:s,token:o,unit:u="ether"}=n;if(o)try{return ne(e,{balanceAddress:t,chainId:s,symbolType:"string",tokenAddress:o})}catch(p){if(p instanceof ce){const v=await ne(e,{balanceAddress:t,chainId:s,symbolType:"bytes32",tokenAddress:o}),g=ve(Ie(v.symbol,{dir:"right"}));return{...v,symbol:g}}throw p}const l=e.getClient({chainId:s}),f=await Q(l,Ce,"getBalance")(r?{address:t,blockNumber:r}:{address:t,blockTag:c}),d=e.chains.find(p=>p.id===s)??l.chain;return{decimals:d.nativeCurrency.decimals,formatted:ie(f,ue(u)),symbol:d.nativeCurrency.symbol,value:f}}async function ne(e,n){const{balanceAddress:t,chainId:r,symbolType:c,tokenAddress:s,unit:o}=n,u={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:c}]}],address:s},[l,i,f]=await Fe(e,{allowFailure:!1,contracts:[{...u,functionName:"balanceOf",args:[t],chainId:r},{...u,functionName:"decimals",chainId:r},{...u,functionName:"symbol",chainId:r}]}),d=ie(l??"0",ue(o??i));return{decimals:i,formatted:d,symbol:f,value:l}}function st(e){return e.state.chainId}function $(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;let t,r;if(Array.isArray(e)&&Array.isArray(n)){if(t=e.length,t!==n.length)return!1;for(r=t;r--!==0;)if(!$(e[r],n[r]))return!1;return!0}if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();const c=Object.keys(e);if(t=c.length,t!==Object.keys(n).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,c[r]))return!1;for(r=t;r--!==0;){const s=c[r];if(s&&!$(e[s],n[s]))return!1}return!0}return e!==e&&n!==n}let R=[];function Ke(e){const n=[...e.state.connections.values()];return e.state.status==="reconnecting"||$(R,n)?R:(R=n,n)}let z=[];function ot(e){const n=e.connectors;return $(z,n)?z:(z=n,n)}let F=!1;async function He(e,n={}){var i,f;if(F)return[];F=!0,e.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const t=[];if((i=n.connectors)!=null&&i.length)for(const d of n.connectors){let p;typeof d=="function"?p=e._internal.connectors.setup(d):p=d,t.push(p)}else t.push(...e.connectors);let r;try{r=await((f=e.storage)==null?void 0:f.getItem("recentConnectorId"))}catch{}const c={};for(const[,d]of e.state.connections)c[d.connector.id]=1;r&&(c[r]=0);const s=Object.keys(c).length>0?[...t].sort((d,p)=>(c[d.id]??10)-(c[p.id]??10)):t;let o=!1;const u=[],l=[];for(const d of s){const p=await d.getProvider().catch(()=>{});if(!p||l.some(S=>S===p)||!await d.isAuthorized())continue;const g=await d.connect({isReconnecting:!0}).catch(()=>null);g&&(d.emitter.off("connect",e._internal.events.connect),d.emitter.on("change",e._internal.events.change),d.emitter.on("disconnect",e._internal.events.disconnect),e.setState(S=>{const y=new Map(o?S.connections:new Map).set(d.uid,{accounts:g.accounts,chainId:g.chainId,connector:d});return{...S,current:o?S.current:d.uid,connections:y}}),u.push({accounts:g.accounts,chainId:g.chainId,connector:d}),l.push(p),o=!0)}return(e.state.status==="reconnecting"||e.state.status==="connecting")&&(o?e.setState(d=>({...d,status:"connected"})):e.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),F=!1,u}function at(e,n){const{onChange:t}=n;return e.subscribe(()=>Ne(e),t,{equalityFn(r,c){const{connector:s,...o}=r,{connector:u,...l}=c;return $(o,l)&&(s==null?void 0:s.id)===(u==null?void 0:u.id)&&(s==null?void 0:s.uid)===(u==null?void 0:u.uid)}})}function ut(e,n){const{onChange:t}=n;return e.subscribe(r=>r.chainId,t)}function lt(e,n){const{onChange:t}=n;return e.subscribe(()=>Ke(e),t,{equalityFn:$})}function dt(e,n){const{onChange:t}=n;return e._internal.connectors.subscribe((r,c)=>{t(Object.values(r),c)})}function ft(e,n){const{initialState:t,reconnectOnMount:r}=n;return t&&!e._internal.store.persist.hasHydrated()&&e.setState({...t,connections:r?t.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){var c;if(e._internal.ssr){await e._internal.store.persist.rehydrate();const s=(c=e._internal.mipd)==null?void 0:c.getProviders().map(e._internal.connectors.providerDetailToConnector).map(e._internal.connectors.setup);e._internal.connectors.setState(o=>[...o,...s??[]])}r?He(e):e.storage&&e.setState(s=>({...s,connections:new Map}))}}}function ht(e){return JSON.stringify(e,(n,t)=>Ve(t)?Object.keys(t).sort().reduce((r,c)=>(r[c]=t[c],r),{}):typeof t=="bigint"?t.toString():t)}function Ve(e){if(!re(e))return!1;const n=e.constructor;if(typeof n>"u")return!0;const t=n.prototype;return!(!re(t)||!t.hasOwnProperty("isPrototypeOf"))}function re(e){return Object.prototype.toString.call(e)==="[object Object]"}function Je(e){const{_defaulted:n,behavior:t,gcTime:r,initialData:c,initialDataUpdatedAt:s,maxPages:o,meta:u,networkMode:l,queryFn:i,queryHash:f,queryKey:d,queryKeyHashFn:p,retry:v,retryDelay:g,structuralSharing:S,getPreviousPageParam:y,getNextPageParam:I,initialPageParam:_,_optimisticResults:C,enabled:a,notifyOnChangeProps:m,placeholderData:h,refetchInterval:w,refetchIntervalInBackground:b,refetchOnMount:k,refetchOnReconnect:P,refetchOnWindowFocus:T,retryOnMount:O,select:M,staleTime:le,suspense:G,throwOnError:Ge,config:Ze,connector:Xe,query:Ye,...de}=e;return de}function mt(e){return{mutationFn(n){return De(e,n)},mutationKey:["connect"]}}function pt(e){return{mutationFn(n){return Te(e,n)},mutationKey:["disconnect"]}}function gt(e,n={}){return{async queryFn({queryKey:t}){const{address:r,scopeKey:c,...s}=t[1];if(!r)throw new Error("address is required");return await Le(e,{...s,address:r})??null},queryKey:Qe(n)}}function Qe(e={}){return["balance",Je(e)]}export{V as B,ct as _,ht as a,st as b,ut as c,gt as d,ot as e,dt as f,Ne as g,ft as h,mt as i,Ke as j,lt as k,pt as l,it as m,J as n,at as w};
