import{R as V}from"./vue-router-DIFBmAOV.js";import{a as W}from"./@wagmi-dpAtJsQx.js";import{u as D,N as Y,r as q,s as L,a as O,m as E,e as G}from"./naive-ui-2ZdcgtXw.js";import{f as K,g as Q,P as H,T as J,A as X}from"./@vicons-C955WZMP.js";import{e as Z,r as k,b as C,c as g,w as ee,g as v,j as e,a2 as o,a1 as m,u as r,F as x,Y as z,Q as P,a3 as d,f as _,a0 as te,s as $,a5 as se}from"./@vue-93dQ2Mcc.js";import"./zustand-23CcGmLH.js";import"./viem-CPWxhzef.js";import"./eventemitter3-BYCAYZDL.js";import"./@babel-B0IGr_Mv.js";import"./mipd-CIcDX0W7.js";import"./@tanstack-BqHjgZgx.js";import"./seemly-D2wyWRjj.js";import"./vooks-DFtz6Cb4.js";import"./evtd-CI_DDEu_.js";import"./lodash-es-D1IKaXUS.js";import"./vueuc-DlWidlC-.js";import"./@css-render-CFZGP0CL.js";import"./vdirs-Bxp-63WN.js";import"./@juggle-C8OzoCMD.js";import"./@emotion-WldOFDRm.js";import"./treemate-BD4Oer00.js";import"./date-fns-ByyCCKXE.js";import"./date-fns-tz-D_KSBUZx.js";import"./async-validator-DKvM95Vc.js";const ne={class:"container main-container-padding"},ae=e("p",null,"Back",-1),oe={class:"container main-container-padding max-w-648"},ie=e("div",{class:"display-grid gap-16 text-center"},[e("h1",{class:"text-40px"},"Create party"),e("p",{class:"op-06"},"Unite with others to increase reward")],-1),le={class:"display-grid gap-16 mt-40"},re={class:"party-form-w display-grid gap-32"},de=e("h2",{class:"text-accent-900 text-center"},"Party details",-1),ce={class:"display-grid gap-8"},pe={class:"party-form-w display-grid gap-32"},ue=e("h2",{class:"text-accent-900 text-center"},"Your share",-1),me={class:"display-grid grid-cols-2 gap-32"},_e={class:"display-flex gap-12 align-items-center"},ve={class:"ico-w"},he={class:"display-grid gap-2"},fe=e("p",{class:"text-12px op-06"},"Your wallet",-1),ye={class:"text-14px"},ge={class:"party-form-w display-grid gap-32"},xe=e("h2",{class:"text-accent-900 text-center"},"Party members",-1),be={class:"display-grid gap-8"},we={class:"display-flex gap-16"},Me={class:"member-revenue-w"},ke={class:"op-06"},Ce={class:"display-grid gap-2"},ze={class:"text-16px op-06"},Pe={class:"display-flex gap-16"},$e=["onClick"],Be=["onClick"],Ne={class:"display-flex gap-16 align-items-center"},Ue={class:"member-revenue-w add-member-ico"},je=e("span",null,"Add type of members",-1),Fe={class:"party-form-w party-no-bg display-grid gap-32"},Ae=e("h2",{class:"text-16px text-center"},"Your revenue will be distributed like this:",-1),Te={class:"revenue-distributed-w display-flex gap-8"},Ie={class:"revenue-distributed-info display-grid gap-2"},Re=e("p",{class:"text-16px op-06"},"@malamuth (you)",-1),Se={class:"revenue-distributed-info display-grid gap-2"},Ve={class:"text-16px op-06"},We=e("div",{class:"mt-80 width-full"},[e("button",{class:"main-custom-btn width-full",type:"button"},[e("span",null,"Create party")])],-1),De=e("div",null,null,-1),Ye={class:"quests-card-modal-content p-tb-24px mt-40"},qe=e("h1",{class:"text-center"},"Add type of members",-1),Le={class:"display-grid gap-8 mt-40"},ht=Z({__name:"CreatePartyView",setup(Oe){const b=D(),{isConnected:w,address:B}=W(),c=k(!1),p=k(-1);function N(){return Math.random().toString(36).substring(7)}const n=C({name:"",description:"",share:null,partyMembers:[{id:"asdad",name:"Telegram members",description:"Those who joined party via TG",revenue:15}]}),a=C({id:"",name:"",description:"",revenue:null}),U=g(()=>n.partyMembers.reduce((i,s)=>i+(s.revenue??0),0)),y=g(()=>n.share?`${n.share}`:`${100-U.value}`),j=g(()=>!!a.name&&a.description&&a.revenue),M=()=>{a.id="",a.name="",a.description="",a.revenue=null},F=i=>{const s=n.partyMembers.findIndex(l=>l.id===i.id);if(s!==-1){p.value=s,c.value=!0;const{id:l,name:u,description:h,revenue:f}=i;Object.assign(a,{id:l,name:u,description:h,revenue:f})}},A=()=>{if(j.value){if(p.value>=0)n.partyMembers[p.value]={...a},p.value=-1;else{const i={id:N(),name:a.name,description:a.description,revenue:a.revenue};n.partyMembers.push(i)}c.value=!1,M(),b.success("Party members created")}else b.warning("Fill in all fields correctly")},T=i=>{const s=n.partyMembers.findIndex(l=>l.id===i);s!==-1&&n.partyMembers.splice(s,1)};return ee(()=>c.value,i=>{console.log(777,p.value),i||M()}),(i,s)=>{const l=Y,u=q,h=L,f=G,I=O,R=E;return _(),v(x,null,[e("section",null,[e("div",ne,[o(r(V),{class:"display-flex align-items-center",to:"/"},{default:m(()=>[o(l,{component:r(K),depth:1,size:24,color:"#fff"},null,8,["component"]),ae]),_:1})])]),e("section",null,[e("div",oe,[ie,e("div",le,[e("div",re,[de,e("div",ce,[o(u,{value:n.name,"onUpdate:value":s[0]||(s[0]=t=>n.name=t),valueModifiers:{trim:!0},path:"user.name",placeholder:"Name",size:"large",type:"text"},null,8,["value"]),o(u,{value:n.description,"onUpdate:value":s[1]||(s[1]=t=>n.description=t),valueModifiers:{trim:!0},placeholder:"Description",size:"large",type:"text"},null,8,["value"])])]),e("div",pe,[ue,e("div",me,[o(h,{value:n.share,"onUpdate:value":s[2]||(s[2]=t=>n.share=t),valueModifiers:{trim:!0},"default-value":null,max:100,min:1,placeholder:`${y.value}%`,"show-button":!1,step:1,size:"large"},null,8,["value","placeholder"]),e("div",_e,[e("div",ve,[o(l,{component:r(Q),depth:1,size:16,color:"#fff"},null,8,["component"])]),e("div",he,[o(I,{show:!r(w)},{default:m(()=>[fe,e("p",ye,[r(w)?(_(),te(f,{key:0,tooltip:!0,style:{"max-width":"100px",color:"white"}},{default:m(()=>[$(d(r(B)),1)]),_:1})):se("",!0)])]),_:1},8,["show"])])])])]),e("div",ge,[xe,e("div",be,[(_(!0),v(x,null,z(n.partyMembers,t=>(_(),v("div",{key:t.id,class:"add-member display-flex justify-between align-items-center"},[e("div",we,[e("div",Me,[e("p",ke,d(t.revenue)+"%",1)]),e("div",Ce,[e("p",null,d(t.name),1),e("p",ze,d(t.description),1)])]),e("div",Pe,[e("button",{class:"main-custom-btn gray-btn",type:"button",onClick:S=>F(t)},[e("span",null,[o(l,{component:r(H),depth:1,size:16,color:"#fff"},null,8,["component"])])],8,$e),e("button",{class:"main-custom-btn red-btn",type:"button",onClick:S=>T(t.id)},[e("span",null,[o(l,{component:r(J),depth:1,size:16,color:"#fff"},null,8,["component"])])],8,Be)])]))),128)),e("button",{class:"add-member text-left display-flex justify-between align-items-center",onClick:s[3]||(s[3]=t=>c.value=!0)},[e("span",Ne,[e("span",Ue,[e("span",null,[o(l,{component:r(X),depth:1,size:24,color:"#fff"},null,8,["component"])])]),je])])])]),e("div",Fe,[Ae,e("div",Te,[e("div",{style:P({maxWidth:`${y.value}%`,minWidth:"10%"}),class:"revenue-distributed-holder display-flex align-items-center justify-center"},[e("div",Ie,[e("p",null,d(y.value)+"%",1),Re])],4),(_(!0),v(x,null,z(n.partyMembers,t=>(_(),v("div",{key:t.id,style:P({maxWidth:`${t.revenue}%`,minWidth:"10%"}),class:"revenue-distributed-holder display-flex align-items-center justify-center"},[e("div",Se,[e("p",null,d(t.revenue)+"%",1),e("p",Ve,[o(f,{tooltip:!0,style:{"max-width":"150px"}},{default:m(()=>[$(d(t.name),1)]),_:2},1024)])])],4))),128))]),We])])]),o(R,{show:c.value,"onUpdate:show":s[7]||(s[7]=t=>c.value=t),class:"quest-custom-modal min-w-648",preset:"dialog",title:"Dialog"},{header:m(()=>[De]),default:m(()=>[e("div",Ye,[qe,e("div",Le,[o(u,{value:a.name,"onUpdate:value":s[4]||(s[4]=t=>a.name=t),valueModifiers:{trim:!0},placeholder:"Name",size:"large",type:"text"},null,8,["value"]),o(u,{value:a.description,"onUpdate:value":s[5]||(s[5]=t=>a.description=t),valueModifiers:{trim:!0},placeholder:"Description",size:"large",type:"text"},null,8,["value"]),o(h,{value:a.revenue,"onUpdate:value":s[6]||(s[6]=t=>a.revenue=t),valueModifiers:{trim:!0},"default-value":null,max:n.share?100-n.share:100,min:1,placeholder:`Revenue share max ${n.share?100-n.share:100}% `,"show-button":!1,step:1,size:"large"},null,8,["value","max","placeholder"]),e("button",{class:"main-custom-btn width-full",type:"button",onClick:A},[e("span",null,d(p.value>=0?"Save":"Add"),1)])])])]),_:1},8,["show"])])],64)}}});export{ht as default};
