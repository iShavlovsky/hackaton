import{R as Z}from"./vue-router-DIFBmAOV.js";import{a as ee}from"./abi-Bp99HW0C.js";import{a as te,e as se}from"./@wagmi-dpAtJsQx.js";import{u as ne,N as ae,r as oe,s as ie,a as le,m as re,e as de}from"./naive-ui-2ZdcgtXw.js";import{f as ce,g as pe,P as ue,T as me,A as _e}from"./@vicons-C955WZMP.js";import{e as ve,r as y,b as N,c as g,w as he,g as p,j as e,a2 as o,a1 as v,u as i,F as k,Y as $,Q as B,a3 as d,a5 as x,f as c,a0 as fe,s as F}from"./@vue-93dQ2Mcc.js";import"./zustand-23CcGmLH.js";import"./viem-CPWxhzef.js";import"./eventemitter3-BYCAYZDL.js";import"./@babel-B0IGr_Mv.js";import"./mipd-CIcDX0W7.js";import"./@tanstack-BqHjgZgx.js";import"./seemly-D2wyWRjj.js";import"./vooks-DFtz6Cb4.js";import"./evtd-CI_DDEu_.js";import"./lodash-es-D1IKaXUS.js";import"./vueuc-DlWidlC-.js";import"./@css-render-CFZGP0CL.js";import"./vdirs-Bxp-63WN.js";import"./@juggle-C8OzoCMD.js";import"./@emotion-WldOFDRm.js";import"./treemate-BD4Oer00.js";import"./date-fns-ByyCCKXE.js";import"./date-fns-tz-D_KSBUZx.js";import"./async-validator-DKvM95Vc.js";const ye={class:"container main-container-padding"},ge=e("p",null,"Back",-1),xe={class:"container main-container-padding max-w-648"},be=e("div",{class:"display-grid gap-16 text-center"},[e("h1",{class:"text-40px"},"Create party"),e("p",{class:"op-06"},"Unite with others to increase reward")],-1),we={class:"display-grid gap-16 mt-40"},Me={class:"party-form-w display-grid gap-32"},ke=e("h2",{class:"text-accent-900 text-center"},"Party details",-1),Ce={class:"display-grid gap-8"},Pe={class:"party-form-w display-grid gap-32"},ze=e("h2",{class:"text-accent-900 text-center"},"Your share",-1),Ae={class:"display-grid grid-cols-2 gap-32"},Ne={class:"display-flex gap-12 align-items-center"},$e={class:"ico-w"},Be={class:"display-grid gap-2"},Fe=e("p",{class:"text-12px op-06"},"Your wallet",-1),Se={class:"text-14px"},Ue={class:"party-form-w display-grid gap-32"},je=e("h2",{class:"text-accent-900 text-center"},"Party members",-1),Ie={class:"display-grid gap-8"},Re={class:"display-flex gap-16"},Te={class:"member-revenue-w"},We={class:"op-06"},Ee={class:"display-grid gap-2"},Ve={class:"text-16px op-06"},De={class:"display-flex gap-16"},Ye=["onClick"],qe=["onClick"],Le={class:"display-flex gap-16 align-items-center"},Oe={class:"member-revenue-w add-member-ico"},Ge=e("span",null,"Add type of members",-1),Ke={class:"party-form-w party-no-bg display-grid gap-32"},Qe=e("h2",{class:"text-16px text-center"},"Your revenue will be distributed like this:",-1),He={class:"revenue-distributed-w display-flex gap-8"},Je={class:"revenue-distributed-info display-grid gap-2"},Xe=e("p",{class:"text-16px op-06"},"@malamuth (you)",-1),Ze={class:"revenue-distributed-info display-grid gap-2"},et={class:"text-16px op-06"},tt={class:"mt-80 width-full"},st=e("span",null,"Create party",-1),nt=[st],at={key:0},ot={key:1},it={key:2},lt=e("div",null,null,-1),rt={class:"quests-card-modal-content p-tb-24px mt-40"},dt=e("h1",{class:"text-center"},"Add type of members",-1),ct={class:"display-grid gap-8 mt-40"},Rt=ve({__name:"CreatePartyView",setup(pt){const S="0x3aE5995509df0Bd125bA20593aA8A945E520e714",b=ne(),{isConnected:C,address:P,chainId:U}=te(),u=y(!1),m=y(-1);function j(){return Math.random().toString(36).substring(7)}const I=y("createRS"),w=y([]),{data:R,error:T,isPending:W,isSuccess:E,isError:V,writeContract:D}=se(),Y=()=>{L.value?D({abi:ee,chainId:U.value,address:S,account:P.value,functionName:I.value,...w.value&&w.value.length?{args:w.value}:{}}):b.error("Check that the form is completed")},n=N({name:"",description:"",share:null,partyMembers:[{id:"asdad",name:"Telegram members",description:"Those who joined party via TG",revenue:15}]}),a=N({id:"",name:"",description:"",revenue:null}),q=g(()=>n.partyMembers.reduce((l,s)=>l+(s.revenue??0),0)),M=g(()=>n.share?`${n.share}`:`${100-q.value}`),L=g(()=>!!n.name&&n.description&&n.share),O=g(()=>!!a.name&&a.description&&a.revenue),z=()=>{a.id="",a.name="",a.description="",a.revenue=null},G=l=>{const s=n.partyMembers.findIndex(r=>r.id===l.id);if(s!==-1){m.value=s,u.value=!0;const{id:r,name:_,description:h,revenue:f}=l;Object.assign(a,{id:r,name:_,description:h,revenue:f})}},K=()=>{if(O.value){if(m.value>=0)n.partyMembers[m.value]={...a},m.value=-1;else{const l={id:j(),name:a.name,description:a.description,revenue:a.revenue};n.partyMembers.push(l)}u.value=!1,z(),b.success("Party members created")}else b.warning("Fill in all fields correctly")},Q=l=>{const s=n.partyMembers.findIndex(r=>r.id===l);s!==-1&&n.partyMembers.splice(s,1)};return he(()=>u.value,l=>{console.log(777,m.value),l||z()}),(l,s)=>{var A;const r=ae,_=oe,h=ie,f=de,H=le,J=re;return c(),p(k,null,[e("section",null,[e("div",ye,[o(i(Z),{class:"display-flex align-items-center",to:"/"},{default:v(()=>[o(r,{component:i(ce),depth:1,size:24,color:"#fff"},null,8,["component"]),ge]),_:1})])]),e("section",null,[e("div",xe,[be,e("div",we,[e("div",Me,[ke,e("div",Ce,[o(_,{value:n.name,"onUpdate:value":s[0]||(s[0]=t=>n.name=t),valueModifiers:{trim:!0},path:"user.name",placeholder:"Name",size:"large",type:"text"},null,8,["value"]),o(_,{value:n.description,"onUpdate:value":s[1]||(s[1]=t=>n.description=t),valueModifiers:{trim:!0},placeholder:"Description",size:"large",type:"text"},null,8,["value"])])]),e("div",Pe,[ze,e("div",Ae,[o(h,{value:n.share,"onUpdate:value":s[2]||(s[2]=t=>n.share=t),valueModifiers:{trim:!0},"default-value":null,max:100,min:1,placeholder:`${M.value}%`,"show-button":!1,step:1,size:"large"},null,8,["value","placeholder"]),e("div",Ne,[e("div",$e,[o(r,{component:i(pe),depth:1,size:16,color:"#fff"},null,8,["component"])]),e("div",Be,[o(H,{show:!i(C)},{default:v(()=>[Fe,e("p",Se,[i(C)?(c(),fe(f,{key:0,tooltip:!0,style:{"max-width":"100px",color:"white"}},{default:v(()=>[F(d(i(P)),1)]),_:1})):x("",!0)])]),_:1},8,["show"])])])])]),e("div",Ue,[je,e("div",Ie,[(c(!0),p(k,null,$(n.partyMembers,t=>(c(),p("div",{key:t.id,class:"add-member display-flex justify-between align-items-center"},[e("div",Re,[e("div",Te,[e("p",We,d(t.revenue)+"%",1)]),e("div",Ee,[e("p",null,d(t.name),1),e("p",Ve,d(t.description),1)])]),e("div",De,[e("button",{class:"main-custom-btn gray-btn",type:"button",onClick:X=>G(t)},[e("span",null,[o(r,{component:i(ue),depth:1,size:16,color:"#fff"},null,8,["component"])])],8,Ye),e("button",{class:"main-custom-btn red-btn",type:"button",onClick:X=>Q(t.id)},[e("span",null,[o(r,{component:i(me),depth:1,size:16,color:"#fff"},null,8,["component"])])],8,qe)])]))),128)),e("button",{class:"add-member text-left display-flex justify-between align-items-center",onClick:s[3]||(s[3]=t=>u.value=!0)},[e("span",Le,[e("span",Oe,[e("span",null,[o(r,{component:i(_e),depth:1,size:24,color:"#fff"},null,8,["component"])])]),Ge])])])]),e("div",Ke,[Qe,e("div",He,[e("div",{style:B({maxWidth:`${M.value}%`,minWidth:"10%"}),class:"revenue-distributed-holder display-flex align-items-center justify-center"},[e("div",Je,[e("p",null,d(M.value)+"%",1),Xe])],4),(c(!0),p(k,null,$(n.partyMembers,t=>(c(),p("div",{key:t.id,style:B({maxWidth:`${t.revenue}%`,minWidth:"10%"}),class:"revenue-distributed-holder display-flex align-items-center justify-center"},[e("div",Ze,[e("p",null,d(t.revenue)+"%",1),e("p",et,[o(f,{tooltip:!0,style:{"max-width":"150px"}},{default:v(()=>[F(d(t.name),1)]),_:2},1024)])])],4))),128))]),e("div",tt,[e("button",{class:"main-custom-btn width-full",type:"button",onClick:Y},nt),e("div",null,[i(W)?(c(),p("p",at,"Fetching...")):x("",!0),i(V)?(c(),p("p",ot,"Error: "+d((A=i(T))==null?void 0:A.message),1)):x("",!0),i(E)?(c(),p("p",it,"Success: "+d(i(R)),1)):x("",!0)])])])])]),o(J,{show:u.value,"onUpdate:show":s[7]||(s[7]=t=>u.value=t),class:"quest-custom-modal min-w-648",preset:"dialog",title:"Dialog"},{header:v(()=>[lt]),default:v(()=>[e("div",rt,[dt,e("div",ct,[o(_,{value:a.name,"onUpdate:value":s[4]||(s[4]=t=>a.name=t),valueModifiers:{trim:!0},placeholder:"Name",size:"large",type:"text"},null,8,["value"]),o(_,{value:a.description,"onUpdate:value":s[5]||(s[5]=t=>a.description=t),valueModifiers:{trim:!0},placeholder:"Description",size:"large",type:"text"},null,8,["value"]),o(h,{value:a.revenue,"onUpdate:value":s[6]||(s[6]=t=>a.revenue=t),valueModifiers:{trim:!0},"default-value":null,max:n.share?100-n.share:100,min:1,placeholder:`Revenue share max ${n.share?100-n.share:100}% `,"show-button":!1,step:1,size:"large"},null,8,["value","max","placeholder"]),e("button",{class:"main-custom-btn width-full",type:"button",onClick:K},[e("span",null,d(m.value>=0?"Save":"Add"),1)])])])]),_:1},8,["show"])])],64)}}});export{Rt as default};
