import{c as L,s as je,p as _e}from"./zustand-BqGR2FB2.js";import{g as E,U as _,R as H,w as Pe,a as Me,S as ce,n as oe,c as Ae,b as ke,m as $e,r as We,C as le,h as qe,t as Ee,f as de,d as De}from"./viem-BviVdOAb.js";import{E as xe}from"./eventemitter3-tQC854ZF.js";import{c as Be}from"./mipd-CIcDX0W7.js";import{u as N,h as Re,i as Ue,b as Ne,o as q,t as Te,d as Y,a as fe,c as T,r as ee}from"./@vue-CEFFGs41.js";import{u as Fe,a as he}from"./@tanstack-BODEixgd.js";class Ke{constructor(n){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new xe})}on(n,t){this._emitter.on(n,t)}once(n,t){this._emitter.once(n,t)}off(n,t){this._emitter.off(n,t)}emit(n,...t){const r=t[0];this._emitter.emit(n,{uid:this.uid,...r})}listenerCount(n){return this._emitter.listenerCount(n)}}function ze(e){return new Ke(e)}function Le(e,n){return JSON.parse(e,(t,r)=>{let c=r;return(c==null?void 0:c.__type)==="bigint"&&(c=BigInt(c.value)),(c==null?void 0:c.__type)==="Map"&&(c=new Map(c.value)),(n==null?void 0:n(t,c))??c})}function se(e,n){return e.slice(0,n).join(".")||"."}function ie(e,n){const{length:t}=e;for(let r=0;r<t;++r)if(e[r]===n)return r+1;return 0}function He(e,n){const t=typeof e=="function",r=typeof n=="function",c=[],s=[];return function(l,u){if(typeof u=="object")if(c.length){const o=ie(c,this);o===0?c[c.length]=this:(c.splice(o),s.splice(o)),s[s.length]=l;const p=ie(c,u);if(p!==0)return r?n.call(this,l,u,se(s,p)):`[ref=${se(s,p)}]`}else c[0]=u,s[0]=l;return t?e.call(this,l,u):u}}function Ve(e,n,t,r){return JSON.stringify(e,He((c,s)=>{let i=s;return typeof i=="bigint"&&(i={__type:"bigint",value:s.toString()}),i instanceof Map&&(i={__type:"Map",value:Array.from(s.entries())}),(n==null?void 0:n(c,i))??i},r),t??void 0)}function Qe(e){const{deserialize:n=Le,key:t="wagmi",serialize:r=Ve,storage:c=pe}=e;function s(i){return i instanceof Promise?i.then(l=>l).catch(()=>null):i}return{...c,key:t,async getItem(i,l){const u=c.getItem(`${t}.${i}`),o=await s(u);return o?n(o)??null:l??null},async setItem(i,l){const u=`${t}.${i}`;l===null?await s(c.removeItem(u)):await s(c.setItem(u,r(l)))},async removeItem(i){await s(c.removeItem(`${t}.${i}`))}}}const pe={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};const R="2.10.4",Je=()=>`@wagmi/core@${R}`;var ge=function(e,n,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!r:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(e):r?r.value:n.get(e)},F,me;let K=class J extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Je()}constructor(n,t={}){var s;super(),F.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=t.cause instanceof J?t.cause.details:(s=t.cause)!=null&&s.message?t.cause.message:t.details,c=t.cause instanceof J&&t.cause.docsPath||t.docsPath;this.message=[n||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...c?[`Docs: ${this.docsBaseUrl}${c}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=c,this.metaMessages=t.metaMessages,this.shortMessage=n}walk(n){return ge(this,F,"m",me).call(this,this,n)}};F=new WeakSet,me=function e(n,t){return t!=null&&t(n)?n:n.cause?ge(this,F,"m",e).call(this,n.cause,t):n};class G extends K{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Ge extends K{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class $ extends K{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}const Ze=/(rabby|trustwallet)/,Xe={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(e){return e!=null&&e.coinbaseWalletExtension?e.coinbaseWalletExtension:U(e,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(e){return U(e,n=>{if(!n.isMetaMask||n.isBraveWallet&&!n._events&&!n._state)return!1;const t=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPortal","isRabby","isTokenPocket","isTokenary","isZerion"];for(const r of t)if(n[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(e){var n,t;return(n=e==null?void 0:e.phantom)!=null&&n.ethereum?(t=e.phantom)==null?void 0:t.ethereum:U(e,"isPhantom")}}};te.type="injected";function te(e={}){const{shimDisconnect:n=!0,unstable_shimAsyncInject:t}=e;function r(){const u=e.target;if(typeof u=="function"){const o=u();if(o)return o}return typeof u=="object"?u:typeof u=="string"?{...Xe[u]??{id:u,name:`${u[0].toUpperCase()}${u.slice(1)}`,provider:`is${u[0].toUpperCase()}${u.slice(1)}`}}:{id:"injected",name:"Injected",provider(o){return o==null?void 0:o.ethereum}}}let c,s,i,l;return u=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return Ze.test(this.id.toLowerCase())},type:te.type,async setup(){const o=await this.getProvider();o&&e.target&&(i||(i=this.onConnect.bind(this),o.on("connect",i)),c||(c=this.onAccountsChanged.bind(this),o.on("accountsChanged",c)))},async connect({chainId:o,isReconnecting:p}={}){var v,m,O,y,C,S;const d=await this.getProvider();if(!d)throw new $;let g=[];if(p)g=await this.getAccounts().catch(()=>[]);else if(n)try{g=(y=(O=(m=(v=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:v.caveats)==null?void 0:m[0])==null?void 0:O.value)==null?void 0:y.map(a=>E(a))}catch(I){const a=I;if(a.code===_.code)throw new _(a);if(a.code===H.code)throw a}try{!(g!=null&&g.length)&&!p&&(g=(await d.request({method:"eth_requestAccounts"})).map(h=>E(h))),i&&(d.removeListener("connect",i),i=void 0),c||(c=this.onAccountsChanged.bind(this),d.on("accountsChanged",c)),s||(s=this.onChainChanged.bind(this),d.on("chainChanged",s)),l||(l=this.onDisconnect.bind(this),d.on("disconnect",l));let I=await this.getChainId();if(o&&I!==o){const a=await this.switchChain({chainId:o}).catch(h=>{if(h.code===_.code)throw h;return{id:I}});I=(a==null?void 0:a.id)??I}return n&&await((C=u.storage)==null?void 0:C.removeItem(`${this.id}.disconnected`)),e.target||await((S=u.storage)==null?void 0:S.setItem("injected.connected",!0)),{accounts:g,chainId:I}}catch(I){const a=I;throw a.code===_.code?new _(a):a.code===H.code?new H(a):a}},async disconnect(){var p,d;const o=await this.getProvider();if(!o)throw new $;s&&(o.removeListener("chainChanged",s),s=void 0),l&&(o.removeListener("disconnect",l),l=void 0),i||(i=this.onConnect.bind(this),o.on("connect",i));try{await o.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch{}n&&await((p=u.storage)==null?void 0:p.setItem(`${this.id}.disconnected`,!0)),e.target||await((d=u.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const o=await this.getProvider();if(!o)throw new $;return(await o.request({method:"eth_accounts"})).map(d=>E(d))},async getChainId(){const o=await this.getProvider();if(!o)throw new $;const p=await o.request({method:"eth_chainId"});return Number(p)},async getProvider(){if(typeof window>"u")return;let o;const p=r();return typeof p.provider=="function"?o=p.provider(window):typeof p.provider=="string"?o=U(window,p.provider):o=p.provider,o&&!o.removeListener&&("off"in o&&typeof o.off=="function"?o.removeListener=o.off:o.removeListener=()=>{}),o},async isAuthorized(){var o,p;try{if(n&&await((o=u.storage)==null?void 0:o.getItem(`${this.id}.disconnected`))||!e.target&&!await((p=u.storage)==null?void 0:p.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(t!==void 0&&t!==!1){const m=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",m),!!await this.getProvider()),O=typeof t=="number"?t:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(C=>window.addEventListener("ethereum#initialized",()=>C(m()),{once:!0}))]:[],new Promise(C=>setTimeout(()=>C(m()),O))]))return!0}throw new $}return!!(await Pe(()=>Me(()=>this.getAccounts(),{timeout:100}))).length}catch{return!1}},async switchChain({addEthereumChainParameter:o,chainId:p}){var v,m,O,y;const d=await this.getProvider();if(!d)throw new $;const g=u.chains.find(C=>C.id===p);if(!g)throw new ce(new G);try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:oe(p)}]}).then(async()=>{await this.getChainId()===p&&u.emitter.emit("change",{chainId:p})}),new Promise(C=>u.emitter.once("change",({chainId:S})=>{S===p&&C()}))]),g}catch(C){const S=C;if(S.code===4902||((m=(v=S==null?void 0:S.data)==null?void 0:v.originalError)==null?void 0:m.code)===4902)try{const{default:I,...a}=g.blockExplorers??{};let h;o!=null&&o.blockExplorerUrls?h=o.blockExplorerUrls:I&&(h=[I.url,...Object.values(a).map(k=>k.url)]);let f;(O=o==null?void 0:o.rpcUrls)!=null&&O.length?f=o.rpcUrls:f=[((y=g.rpcUrls.default)==null?void 0:y.http[0])??""];const b={blockExplorerUrls:h,chainId:oe(p),chainName:(o==null?void 0:o.chainName)??g.name,iconUrls:o==null?void 0:o.iconUrls,nativeCurrency:(o==null?void 0:o.nativeCurrency)??g.nativeCurrency,rpcUrls:f};if(await d.request({method:"wallet_addEthereumChain",params:[b]}),await this.getChainId()!==p)throw new _(new Error("User rejected switch after adding network."));return g}catch(I){throw new _(I)}throw S.code===_.code?new _(S):new ce(S)}},async onAccountsChanged(o){var p;if(o.length===0)this.onDisconnect();else if(u.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),n&&await((p=u.storage)==null?void 0:p.removeItem(`${this.id}.disconnected`))}else u.emitter.emit("change",{accounts:o.map(d=>E(d))})},onChainChanged(o){const p=Number(o);u.emitter.emit("change",{chainId:p})},async onConnect(o){const p=await this.getAccounts();if(p.length===0)return;const d=Number(o.chainId);u.emitter.emit("connect",{accounts:p,chainId:d});const g=await this.getProvider();g&&(i&&(g.removeListener("connect",i),i=void 0),c||(c=this.onAccountsChanged.bind(this),g.on("accountsChanged",c)),s||(s=this.onChainChanged.bind(this),g.on("chainChanged",s)),l||(l=this.onDisconnect.bind(this),g.on("disconnect",l)))},async onDisconnect(o){const p=await this.getProvider();o&&o.code===1013&&p&&(await this.getAccounts()).length||(u.emitter.emit("disconnect"),p&&(s&&(p.removeListener("chainChanged",s),s=void 0),l&&(p.removeListener("disconnect",l),l=void 0),i||(i=this.onConnect.bind(this),p.on("connect",i))))}})}function U(e,n){function t(c){return typeof n=="function"?n(c):typeof n=="string"?c[n]:!0}const r=e.ethereum;if(r!=null&&r.providers)return r.providers.find(c=>t(c));if(r&&t(r))return r}const Z=256;let D=Z,x;function Ye(e=11){if(!x||D+e>Z*2){x="",D=0;for(let n=0;n<Z;n++)x+=(256+Math.random()*256|0).toString(16).substring(1)}return x.substring(D,D+++e)}function Tt(e){const{multiInjectedProviderDiscovery:n=!0,storage:t=Qe({storage:typeof window<"u"&&window.localStorage?window.localStorage:pe}),syncConnectedChain:r=!0,ssr:c,...s}=e,i=typeof window<"u"&&n?Be():void 0,l=L(()=>s.chains),u=L(()=>[...s.connectors??[],...c?[]:(i==null?void 0:i.getProviders().map(p))??[]].map(o));function o(a){var b;const h=ze(Ye()),f={...a({emitter:h,chains:l.getState(),storage:t}),emitter:h,uid:h.uid};return h.on("connect",S),(b=f.setup)==null||b.call(f),f}function p(a){const{info:h}=a,f=a.provider;return te({target:{...h,id:h.rdns,provider:f}})}const d=new Map;function g(a={}){const h=a.chainId??y.getState().chainId,f=l.getState().find(w=>w.id===h);if(a.chainId&&!f)throw new G;{const w=d.get(y.getState().chainId);if(w&&!f)return w;if(!f)throw new G}{const w=d.get(h);if(w)return w}let b;if(s.client)b=s.client({chain:f});else{const w=f.id,k=l.getState().map(j=>j.id),P={},z=Object.entries(s);for(const[j,M]of z)if(!(j==="chains"||j==="client"||j==="connectors"||j==="transports"))if(typeof M=="object")if(w in M)P[j]=M[w];else{if(k.some(re=>re in M))continue;P[j]=M}else P[j]=M;b=Ae({...P,chain:f,batch:P.batch??{multicall:!0},transport:j=>s.transports[w]({...j,connectors:u})})}return d.set(h,b),b}function v(){return{chainId:l.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let m;const O="0.0.0-canary-";R.startsWith(O)?m=parseInt(R.replace(O,"")):m=parseInt(R.split(".")[0]??"0");const y=L(je(t?_e(v,{migrate(a,h){if(h===m)return a;const f=v(),b=a&&typeof a=="object"&&"chainId"in a&&typeof a.chainId=="number"?a.chainId:f.chainId;return{...f,chainId:b}},name:"store",partialize(a){return{connections:{__type:"Map",value:Array.from(a.connections.entries()).map(([h,f])=>{const{id:b,name:w,type:k,uid:P}=f.connector;return[h,{...f,connector:{id:b,name:w,type:k,uid:P}}]})},chainId:a.chainId,current:a.current}},skipHydration:c,storage:t,version:m}):v));r&&y.subscribe(({connections:a,current:h})=>{var f;return h?(f=a.get(h))==null?void 0:f.chainId:void 0},a=>{if(l.getState().some(f=>f.id===a))return y.setState(f=>({...f,chainId:a??f.chainId}))}),i==null||i.subscribe(a=>{const h=new Map;for(const b of u.getState())h.set(b.id,!0);const f=[];for(const b of a){const w=o(p(b));h.has(w.id)||f.push(w)}t&&!y.persist.hasHydrated()||u.setState(b=>[...b,...f],!0)});function C(a){y.setState(h=>{const f=h.connections.get(a.uid);return f?{...h,connections:new Map(h.connections).set(a.uid,{accounts:a.accounts??f.accounts,chainId:a.chainId??f.chainId,connector:f.connector})}:h})}function S(a){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(h=>{const f=u.getState().find(b=>b.uid===a.uid);return f?(f.emitter.listenerCount("connect")&&f.emitter.off("connect",C),f.emitter.listenerCount("change")||f.emitter.on("change",C),f.emitter.listenerCount("disconnect")||f.emitter.on("disconnect",I),{...h,connections:new Map(h.connections).set(a.uid,{accounts:a.accounts,chainId:a.chainId,connector:f}),current:a.uid,status:"connected"}):h})}function I(a){y.setState(h=>{const f=h.connections.get(a.uid);if(f){const w=f.connector;w.emitter.listenerCount("change")&&f.connector.emitter.off("change",C),w.emitter.listenerCount("disconnect")&&f.connector.emitter.off("disconnect",I),w.emitter.listenerCount("connect")||f.connector.emitter.on("connect",S)}if(h.connections.delete(a.uid),h.connections.size===0)return{...h,connections:new Map,current:null,status:"disconnected"};const b=h.connections.values().next().value;return{...h,connections:new Map(h.connections),current:b.connector.uid}})}return{get chains(){return l.getState()},get connectors(){return u.getState()},storage:t,getClient:g,get state(){return y.getState()},setState(a){let h;typeof a=="function"?h=a(y.getState()):h=a;const f=v();typeof h!="object"&&(h=f),Object.keys(f).some(w=>!(w in h))&&(h=f),y.setState(h,!0)},subscribe(a,h,f){return y.subscribe(a,h,f?{...f,fireImmediately:f.emitImmediately}:void 0)},_internal:{mipd:i,store:y,ssr:!!c,syncConnectedChain:r,transports:s.transports,chains:{setState(a){const h=typeof a=="function"?a(l.getState()):a;if(h.length!==0)return l.setState(h,!0)},subscribe(a){return l.subscribe(a)}},connectors:{providerDetailToConnector:p,setup:o,setState(a){return u.setState(typeof a=="function"?a(u.getState()):a,!0)},subscribe(a){return u.subscribe(a)}},events:{change:C,connect:S,disconnect:I}}}}function ne(e,n,t){const r=e[n.name];if(typeof r=="function")return r;const c=e[t];return typeof c=="function"?c:s=>n(e,s)}async function et(e,n){var r;let t;if(typeof n.connector=="function"?t=e._internal.connectors.setup(n.connector):t=n.connector,t.uid===e.state.current)throw new Ge;try{e.setState(i=>({...i,status:"connecting"})),t.emitter.emit("message",{type:"connecting"});const c=await t.connect({chainId:n.chainId}),s=c.accounts;return t.emitter.off("connect",e._internal.events.connect),t.emitter.on("change",e._internal.events.change),t.emitter.on("disconnect",e._internal.events.disconnect),await((r=e.storage)==null?void 0:r.setItem("recentConnectorId",t.id)),e.setState(i=>({...i,connections:new Map(i.connections).set(t.uid,{accounts:s,chainId:c.chainId,connector:t}),current:t.uid,status:"connected"})),{accounts:s,chainId:c.chainId}}catch(c){throw e.setState(s=>({...s,status:s.current?"connected":"disconnected"})),c}}async function tt(e,n={}){var c,s;let t;if(n.connector)t=n.connector;else{const{connections:i,current:l}=e.state,u=i.get(l);t=u==null?void 0:u.connector}const r=e.state.connections;t&&(await t.disconnect(),t.emitter.off("change",e._internal.events.change),t.emitter.off("disconnect",e._internal.events.disconnect),t.emitter.on("connect",e._internal.events.connect),r.delete(t.uid)),e.setState(i=>{if(r.size===0)return{...i,connections:new Map,current:null,status:"disconnected"};const l=r.values().next().value;return{...i,connections:new Map(r),current:l.connector.uid}});{const i=e.state.current;if(!i)return;const l=(c=e.state.connections.get(i))==null?void 0:c.connector;if(!l)return;await((s=e.storage)==null?void 0:s.setItem("recentConnectorId",l.id))}}function ye(e){return typeof e=="number"?e:e==="wei"?0:Math.abs(ke[e])}function be(e){const n=e.state.current,t=e.state.connections.get(n),r=t==null?void 0:t.accounts,c=r==null?void 0:r[0],s=e.chains.find(l=>l.id===(t==null?void 0:t.chainId)),i=e.state.status;switch(i){case"connected":return{address:c,addresses:r,chain:s,chainId:t==null?void 0:t.chainId,connector:t==null?void 0:t.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:i};case"reconnecting":return{address:c,addresses:r,chain:s,chainId:t==null?void 0:t.chainId,connector:t==null?void 0:t.connector,isConnected:!!c,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:i};case"connecting":return{address:c,addresses:r,chain:s,chainId:t==null?void 0:t.chainId,connector:t==null?void 0:t.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:i};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:i}}}async function nt(e,n){const{allowFailure:t=!0,chainId:r,contracts:c,...s}=n,i=e.getClient({chainId:r});return ne(i,$e,"multicall")({allowFailure:t,contracts:c,...s})}function rt(e,n){const{chainId:t,...r}=n,c=e.getClient({chainId:t});return ne(c,We,"readContract")(r)}async function ct(e,n){const{allowFailure:t=!0,blockNumber:r,blockTag:c,...s}=n,i=n.contracts;try{const l=i.reduce((d,g,v)=>{const m=g.chainId??e.state.chainId;return{...d,[m]:[...d[m]||[],{contract:g,index:v}]}},{}),u=()=>Object.entries(l).map(([d,g])=>nt(e,{...s,allowFailure:t,blockNumber:r,blockTag:c,chainId:parseInt(d),contracts:g.map(({contract:v})=>v)})),o=(await Promise.all(u())).flat(),p=Object.values(l).flatMap(d=>d.map(({index:g})=>g));return o.reduce((d,g,v)=>(d&&(d[p[v]]=g),d),[])}catch(l){if(l instanceof le)throw l;const u=()=>i.map(o=>rt(e,{...o,blockNumber:r,blockTag:c}));return t?(await Promise.allSettled(u())).map(o=>o.status==="fulfilled"?{result:o.value,status:"success"}:{error:o.reason,result:void 0,status:"failure"}):await Promise.all(u())}}async function ot(e,n){const{address:t,blockNumber:r,blockTag:c,chainId:s,token:i,unit:l="ether"}=n;if(i)try{return ae(e,{balanceAddress:t,chainId:s,symbolType:"string",tokenAddress:i})}catch(g){if(g instanceof le){const v=await ae(e,{balanceAddress:t,chainId:s,symbolType:"bytes32",tokenAddress:i}),m=qe(Ee(v.symbol,{dir:"right"}));return{...v,symbol:m}}throw g}const u=e.getClient({chainId:s}),p=await ne(u,De,"getBalance")(r?{address:t,blockNumber:r}:{address:t,blockTag:c}),d=e.chains.find(g=>g.id===s)??u.chain;return{decimals:d.nativeCurrency.decimals,formatted:de(p,ye(l)),symbol:d.nativeCurrency.symbol,value:p}}async function ae(e,n){const{balanceAddress:t,chainId:r,symbolType:c,tokenAddress:s,unit:i}=n,l={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:c}]}],address:s},[u,o,p]=await ct(e,{allowFailure:!1,contracts:[{...l,functionName:"balanceOf",args:[t],chainId:r},{...l,functionName:"decimals",chainId:r},{...l,functionName:"symbol",chainId:r}]}),d=de(u??"0",ye(i??o));return{decimals:o,formatted:d,symbol:p,value:u}}function st(e){return e.state.chainId}function W(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;let t,r;if(Array.isArray(e)&&Array.isArray(n)){if(t=e.length,t!==n.length)return!1;for(r=t;r--!==0;)if(!W(e[r],n[r]))return!1;return!0}if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();const c=Object.keys(e);if(t=c.length,t!==Object.keys(n).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,c[r]))return!1;for(r=t;r--!==0;){const s=c[r];if(s&&!W(e[s],n[s]))return!1}return!0}return e!==e&&n!==n}let B=[];function we(e){const n=[...e.state.connections.values()];return e.state.status==="reconnecting"||W(B,n)?B:(B=n,n)}let V=[];function it(e){const n=e.connectors;return W(V,n)?V:(V=n,n)}let Q=!1;async function at(e,n={}){var o,p;if(Q)return[];Q=!0,e.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const t=[];if((o=n.connectors)!=null&&o.length)for(const d of n.connectors){let g;typeof d=="function"?g=e._internal.connectors.setup(d):g=d,t.push(g)}else t.push(...e.connectors);let r;try{r=await((p=e.storage)==null?void 0:p.getItem("recentConnectorId"))}catch{}const c={};for(const[,d]of e.state.connections)c[d.connector.id]=1;r&&(c[r]=0);const s=Object.keys(c).length>0?[...t].sort((d,g)=>(c[d.id]??10)-(c[g.id]??10)):t;let i=!1;const l=[],u=[];for(const d of s){const g=await d.getProvider().catch(()=>{});if(!g||u.some(O=>O===g)||!await d.isAuthorized())continue;const m=await d.connect({isReconnecting:!0}).catch(()=>null);m&&(d.emitter.off("connect",e._internal.events.connect),d.emitter.on("change",e._internal.events.change),d.emitter.on("disconnect",e._internal.events.disconnect),e.setState(O=>{const y=new Map(i?O.connections:new Map).set(d.uid,{accounts:m.accounts,chainId:m.chainId,connector:d});return{...O,current:i?O.current:d.uid,connections:y}}),l.push({accounts:m.accounts,chainId:m.chainId,connector:d}),u.push(g),i=!0)}return(e.state.status==="reconnecting"||e.state.status==="connecting")&&(i?e.setState(d=>({...d,status:"connected"})):e.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Q=!1,l}function ut(e,n){const{onChange:t}=n;return e.subscribe(()=>be(e),t,{equalityFn(r,c){const{connector:s,...i}=r,{connector:l,...u}=c;return W(i,u)&&(s==null?void 0:s.id)===(l==null?void 0:l.id)&&(s==null?void 0:s.uid)===(l==null?void 0:l.uid)}})}function lt(e,n){const{onChange:t}=n;return e.subscribe(r=>r.chainId,t)}function dt(e,n){const{onChange:t}=n;return e.subscribe(()=>we(e),t,{equalityFn:W})}function ft(e,n){const{onChange:t}=n;return e._internal.connectors.subscribe((r,c)=>{t(Object.values(r),c)})}function ht(e,n){const{initialState:t,reconnectOnMount:r}=n;return t&&!e._internal.store.persist.hasHydrated()&&e.setState({...t,connections:r?t.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){var c;if(e._internal.ssr){await e._internal.store.persist.rehydrate();const s=(c=e._internal.mipd)==null?void 0:c.getProviders().map(e._internal.connectors.providerDetailToConnector).map(e._internal.connectors.setup);e._internal.connectors.setState(i=>[...i,...s??[]])}r?at(e):e.storage&&e.setState(s=>({...s,connections:new Map}))}}}const ve=Symbol(),Ft={install(e,n){const{config:t,reconnectOnMount:r=!0}=n;e.provide(ve,t);const{onMount:c}=ht(t,{...n,reconnectOnMount:r});c()}},pt="0.0.10",gt=()=>`@wagmi/vue@${pt}`;class Ce extends K{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/vue"}get version(){return gt()}}class mt extends Ce{constructor(){super("No `config` found in Vue context, use `WagmiPlugin` to properly initialize the library.",{docsPath:"/api/TODO"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiPluginNotFoundError"})}}class yt extends Ce{constructor(){super("Wagmi composables can only be used inside `setup()` function or functions that support injection context.",{docsPath:"/api/TODO"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiInjectionContextError"})}}function bt(e,n){Object.keys(e).forEach(t=>{e[t]=n[t]})}function A(e={}){const n=N(e);if(n.config)return n.config;if(!Re())throw new yt;const t=Ue(ve);if(!t)throw new mt;return t}function Kt(e={}){const n=A(e),t=Ne(be(n)),r=ut(n,{onChange(c){bt(t,c)}});return q(()=>r()),Te(Y(t))}function X(e,n){if(n){const t=n(e);if(t===void 0&&fe(e)||t!==void 0)return t}if(Array.isArray(e))return e.map(t=>X(t,n));if(typeof e=="object"&&wt(e)){const t=Object.entries(e).map(([r,c])=>[r,X(c,n)]);return Object.fromEntries(t)}return e}function Ie(e){return X(e,n=>{if(fe(n))return Ie(N(n))})}function wt(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const n=Object.getPrototypeOf(e);return n===null||n===Object.prototype}function vt(e){return JSON.stringify(e,(n,t)=>Ct(t)?Object.keys(t).sort().reduce((r,c)=>(r[c]=t[c],r),{}):typeof t=="bigint"?t.toString():t)}function Ct(e){if(!ue(e))return!1;const n=e.constructor;if(typeof n>"u")return!0;const t=n.prototype;return!(!ue(t)||!t.hasOwnProperty("isPrototypeOf"))}function ue(e){return Object.prototype.toString.call(e)==="[object Object]"}function It(e){const{_defaulted:n,behavior:t,gcTime:r,initialData:c,initialDataUpdatedAt:s,maxPages:i,meta:l,networkMode:u,queryFn:o,queryHash:p,queryKey:d,queryKeyHashFn:g,retry:v,retryDelay:m,structuralSharing:O,getPreviousPageParam:y,getNextPageParam:C,initialPageParam:S,_optimisticResults:I,enabled:a,notifyOnChangeProps:h,placeholderData:f,refetchInterval:b,refetchIntervalInBackground:w,refetchOnMount:k,refetchOnReconnect:P,refetchOnWindowFocus:z,retryOnMount:j,select:M,staleTime:Oe,suspense:re,throwOnError:$t,config:Wt,connector:qt,query:Et,...Se}=e;return Se}function Ot(e){return{mutationFn(n){return et(e,n)},mutationKey:["connect"]}}function St(e){return{mutationFn(n){return tt(e,n)},mutationKey:["disconnect"]}}function jt(e,n={}){return{async queryFn({queryKey:t}){const{address:r,scopeKey:c,...s}=t[1];if(!r)throw new Error("address is required");return await ot(e,{...s,address:r})??null},queryKey:_t(n)}}function _t(e={}){return["balance",It(e)]}function Pt(e){const n=T(()=>({...N(e),queryKeyHashFn:vt})),t=Fe(n);return t.queryKey=N(n).queryKey,t}function Mt(e={}){const n=A(e),t=ee(st(n)),r=lt(n,{onChange(c){t.value=c}});return q(()=>r()),Y(t)}function zt(e={}){const n=T(()=>Ie(e)),t=A(n),r=Mt({config:t}),c=T(()=>{const{address:s,chainId:i=r.value,query:l={}}=n.value,u=jt(t,{...n.value,chainId:i}),o=!!(s&&(l.enabled??!0));return{...l,...u,enabled:o}});return Pt(c)}function At(e={}){const n=A(e),t=ee(it(n)),r=ft(n,{onChange(c){t.value=c}});return q(()=>r()),t}function Lt(e={}){const{mutation:n}=e,t=A(e),r=Ot(t),{mutate:c,mutateAsync:s,...i}=he({...n,...r}),l=t.subscribe(({status:u})=>u,(u,o)=>{o==="connected"&&u==="disconnected"&&i.reset()});return q(()=>l()),{...i,connect:c,connectAsync:s,connectors:At({config:t}).value}}function kt(e={}){const n=A(e),t=ee(we(n)),r=dt(n,{onChange(c){t.value=c}});return q(()=>r()),Y(t)}function Ht(e={}){const{mutation:n}=e,t=A(e),r=kt({config:t}),c=St(t),{mutate:s,mutateAsync:i,...l}=he({...n,...c});return{...l,connectors:T(()=>r.value.map(u=>u.connector)),disconnect:s,disconnectAsync:i}}export{Ft as W,Lt as a,Ht as b,Tt as c,Kt as d,zt as u};
