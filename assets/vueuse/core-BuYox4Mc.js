import{u as k,t as q,a as B,i as h,n as N,b as P,c as y,d as O,e as U,f as j}from"../@vueuse-DdtGEXPn.js";import{x as w,f as g,w as S,n as z,k as D}from"../@vue-DAVHC-O1.js";function E(o){var t;const r=y(o);return(t=r==null?void 0:r.$el)!=null?t:r}const T=h?window:void 0,F=h?window.document:void 0,_=h?window.navigator:void 0;function R(...o){let t,r,s,d;if(typeof o[0]=="string"||Array.isArray(o[0])?([r,s,d]=o,t=T):[t,r,s,d]=o,!t)return N;Array.isArray(r)||(r=[r]),Array.isArray(s)||(s=[s]);const e=[],l=()=>{e.forEach(a=>a()),e.length=0},f=(a,n,i,v)=>(a.addEventListener(n,i,v),()=>a.removeEventListener(n,i,v)),c=S(()=>[E(t),y(d)],([a,n])=>{if(l(),!a)return;const i=P(n)?{...n}:n;e.push(...r.flatMap(v=>s.map(b=>f(a,v,b,i))))},{immediate:!0,flush:"post"}),p=()=>{c(),l()};return O(p),p}function I(){const o=g(!1),t=D();return t&&z(()=>{o.value=!0},t),o}function A(o){const t=I();return w(()=>(t.value,!!o()))}function V(o,t,r={}){const{window:s=T,...d}=r;let e;const l=A(()=>s&&"MutationObserver"in s),f=()=>{e&&(e.disconnect(),e=void 0)},c=w(()=>{const i=y(o),v=(Array.isArray(i)?i:[i]).map(E).filter(U);return new Set(v)}),p=S(()=>c.value,i=>{f(),l.value&&i.size&&(e=new MutationObserver(t),i.forEach(v=>e.observe(v,d)))},{immediate:!0,flush:"post"}),a=()=>e==null?void 0:e.takeRecords(),n=()=>{f(),p()};return O(n),{isSupported:l,stop:n,takeRecords:a}}function M(o,t={}){const{controls:r=!1,navigator:s=_}=t,d=A(()=>s&&"permissions"in s);let e;const l=typeof o=="string"?{name:o}:o,f=g(),c=()=>{e&&(f.value=e.state)},p=j(async()=>{if(d.value){if(!e)try{e=await s.permissions.query(l),R(e,"change",c),c()}catch{f.value="prompt"}return e}});return p(),r?{state:f,isSupported:d,query:p}:f}function H(o={}){const{navigator:t=_,read:r=!1,source:s,copiedDuring:d=1500,legacy:e=!1}=o,l=A(()=>t&&"clipboard"in t),f=M("clipboard-read"),c=M("clipboard-write"),p=w(()=>l.value||e),a=g(""),n=g(!1),i=k(()=>n.value=!1,d);function v(){l.value&&C(f.value)?t.clipboard.readText().then(u=>{a.value=u}):a.value=W()}p.value&&r&&R(["copy","cut"],v);async function b(u=y(s)){p.value&&u!=null&&(l.value&&C(c.value)?await t.clipboard.writeText(u):L(u),a.value=u,n.value=!0,i.start())}function L(u){const m=document.createElement("textarea");m.value=u??"",m.style.position="absolute",m.style.opacity="0",document.body.appendChild(m),m.select(),document.execCommand("copy"),m.remove()}function W(){var u,m,x;return(x=(m=(u=document==null?void 0:document.getSelection)==null?void 0:u.call(document))==null?void 0:m.toString())!=null?x:""}function C(u){return u==="granted"||u==="prompt"}return{isSupported:p,text:a,copied:n,copy:b}}function J(o=null,t={}){var r,s,d;const{document:e=F,restoreOnUnmount:l=n=>n}=t,f=(r=e==null?void 0:e.title)!=null?r:"",c=q((s=o??(e==null?void 0:e.title))!=null?s:null),p=o&&typeof o=="function";function a(n){if(!("titleTemplate"in t))return n;const i=t.titleTemplate||"%s";return typeof i=="function"?i(n):y(i).replace(/%s/g,n)}return S(c,(n,i)=>{n!==i&&e&&(e.title=a(typeof n=="string"?n:""))},{immediate:!0}),t.observe&&!t.titleTemplate&&e&&!p&&V((d=e.head)==null?void 0:d.querySelector("title"),()=>{e&&e.title!==c.value&&(c.value=a(e.title))},{childList:!0}),B(()=>{if(l){const n=l(f,c.value||"");n!=null&&e&&(e.title=n)}}),c}export{H as a,J as u};
