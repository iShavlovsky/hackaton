import{R as S}from"./vue-router-Ckoesiwk.js";import{a as j}from"./abi-Bp99HW0C.js";import{a as ce}from"./@vueuse-DDe9a6K5.js";import{a as ue,e as pe,f as me}from"./@wagmi-Mrh7Gowl.js";import{f as _e,g as ve,P as he,T as fe,A as ye,e as ge}from"./@vicons-D7ptmEij.js";import{u as xe,a as be,N as we,s as Me,t as Ce,e as ke,o as Pe}from"./naive-ui-ZfQSKBF9.js";import{e as $e,r as w,q as ze,b as D,c as M,w as P,a0 as q,a1 as d,u as i,f as p,j as e,a2 as o,s as T,a3 as c,a5 as W,g as h,Y as E,F as V,Q as Y,a as Ie}from"./@vue-CA14Bhfh.js";import"./zustand-23CcGmLH.js";import"./viem-L8n_iVy8.js";import"./eventemitter3-BYCAYZDL.js";import"./@babel-B0IGr_Mv.js";import"./mipd-CIcDX0W7.js";import"./@tanstack-Dj03aQiD.js";import"./seemly-D2wyWRjj.js";import"./vooks-5LbGPu-y.js";import"./evtd-CI_DDEu_.js";import"./lodash-es-D1IKaXUS.js";import"./vueuc-DvhC_adR.js";import"./@css-render-DNgWC2BO.js";import"./vdirs-Bxp-63WN.js";import"./@juggle-C8OzoCMD.js";import"./@emotion-WldOFDRm.js";import"./treemate-BD4Oer00.js";import"./date-fns-ByyCCKXE.js";import"./date-fns-tz-D_KSBUZx.js";import"./async-validator-DKvM95Vc.js";const Ne={class:"container main-container-padding"},Ae=e("p",null,"Back",-1),Be={class:"container main-container-padding max-w-648"},Fe=e("div",{class:"display-grid gap-16 text-center"},[e("h1",{class:"text-40px"},"Create party"),e("p",{class:"op-06"},"Unite with others to increase reward")],-1),Ue={class:"display-grid gap-16 mt-40"},Re={class:"party-form-w display-grid gap-32"},Se=e("h2",{class:"text-accent-900 text-center"},"Party details",-1),je={class:"display-grid gap-8"},De={class:"party-form-w display-grid gap-32"},qe=e("h2",{class:"text-accent-900 text-center"},"Your share",-1),Te={class:"you-share-w display-grid grid-cols-2 gap-32"},We={class:"display-flex gap-12 align-items-center"},Ee={class:"ico-w"},Ve={class:"display-grid gap-2"},Ye=e("p",{class:"text-12px op-06"},"Your wallet",-1),Le={class:"text-14px"},Oe={class:"party-form-w display-grid gap-32"},Ge=e("h2",{class:"text-accent-900 text-center"},"Party members",-1),He={class:"display-grid gap-8"},Ke={class:"display-flex gap-16"},Qe={class:"display-flex member-revenue-w"},Je={class:"op-06"},Xe={class:"display-grid gap-2"},Ze={class:"text-16px op-06"},et={class:"display-flex gap-16"},tt=["onClick"],st=["onClick"],at={class:"display-flex gap-16 align-items-center"},nt={class:"display-flex member-revenue-w add-member-ico"},ot=e("span",null,"Add type of members",-1),it={class:"party-form-w party-no-bg display-grid gap-32"},lt=e("h2",{class:"text-16px text-center"},"Your revenue will be distributed like this:",-1),rt={class:"revenue-distributed-w display-flex gap-8"},dt={class:"revenue-distributed-info display-grid gap-2"},ct=e("p",{class:"text-16px op-06"},"@malamuth (you)",-1),ut={class:"revenue-distributed-info display-grid gap-2"},pt={class:"text-16px op-06"},mt=e("span",null,"Create party",-1),_t=[mt],vt=e("div",null,null,-1),ht={class:"quests-card-modal-content p-tb-24px mt-40"},ft=e("h1",{class:"text-center"},"Add type of members",-1),yt={class:"display-grid gap-8 mt-40"},gt=e("div",null,null,-1),xt={class:"quests-card-modal-content p-tb-24px mt-40"},bt=e("h1",{class:"text-center"},"Done!!",-1),wt={class:"display-grid gap-8 mt-40"},Mt={class:"display-flex flex-row gap-8 align-items-center op-06"},Ct=e("span",null,"Come back home",-1),Xt=$e({__name:"CreatePartyView",setup(kt){const $="0x3aE5995509df0Bd125bA20593aA8A945E520e714",u=xe(),{isConnected:z,address:f,chainId:I}=ue(),m=w(!1),v=w(-1);function L(){return Math.random().toString(36).substring(7)}const O=w("createRS"),C=w([]),{data:y,error:G,isPending:H,isSuccess:g,isError:K,writeContract:Q}=pe(),J=()=>{ee.value?Q({abi:j,chainId:I.value,address:$,account:f.value,functionName:O.value,...C.value&&C.value.length?{args:C.value}:{}}):u.warning("Fill in all the fields")},{data:N,refetch:X}=me({abi:j,chainId:I.value,address:$,account:f.value,functionName:"lastPartyId",query:{enabled:!0}}),A=async()=>{await X(),u.info(`last Party Id: ${N.value}`),console.log("last Party Id:",N.value)};ze(()=>{A()});const a=D({name:"",description:"",share:null,partyMembers:[{id:"asdad",name:"Telegram members",description:"Those who joined party via TG",revenue:15}]}),n=D({id:"",name:"",description:"",revenue:null}),Z=M(()=>a.partyMembers.reduce((l,s)=>l+(s.revenue??0),0)),k=M(()=>a.share?`${a.share}`:`${100-Z.value}`),ee=M(()=>!!a.name&&a.description&&a.share),te=M(()=>!!n.name&&n.description&&n.revenue),B=()=>{n.id="",n.name="",n.description="",n.revenue=null},se=l=>{const s=a.partyMembers.findIndex(r=>r.id===l.id);if(s!==-1){v.value=s,m.value=!0;const{id:r,name:_,description:x,revenue:b}=l;Object.assign(n,{id:r,name:_,description:x,revenue:b})}},F=()=>{if(te.value){if(v.value>=0)a.partyMembers[v.value]={...n},v.value=-1;else{const l={id:L(),name:n.name,description:n.description,revenue:n.revenue};a.partyMembers.push(l)}m.value=!1,B(),u.success("Party members created")}else u.warning("Fill in all fields correctly")},ae=l=>{const s=a.partyMembers.findIndex(r=>r.id===l);s!==-1&&a.partyMembers.splice(s,1)},{text:ne,copy:oe,copied:ie,isSupported:le}=ce(),re=l=>{f.value&&oe(l).then(()=>{ie&&u.success(ne.value)})};return P(()=>m.value,l=>{l||B()}),P(()=>g.value,()=>{u.success(`Done ${y.value}`),A()}),P(()=>K.value,()=>{var l;u.error(`Error ${(l=G.value)==null?void 0:l.message}`)}),(l,s)=>{const r=we,_=Me,x=Ce,b=ke,U=be,R=Pe;return p(),q(U,{show:i(H)},{default:d(()=>[e("section",null,[e("div",Ne,[o(i(S),{class:"display-flex align-items-center",to:"/"},{default:d(()=>[o(r,{component:i(_e),depth:1,size:24,color:"#fff"},null,8,["component"]),Ae]),_:1})])]),e("section",null,[e("div",Be,[Fe,e("div",Ue,[e("div",Re,[Se,e("div",je,[o(_,{value:a.name,"onUpdate:value":s[0]||(s[0]=t=>a.name=t),valueModifiers:{trim:!0},path:"user.name",placeholder:"Name",size:"large",type:"text"},null,8,["value"]),o(_,{value:a.description,"onUpdate:value":s[1]||(s[1]=t=>a.description=t),valueModifiers:{trim:!0},placeholder:"Description",size:"large",type:"text"},null,8,["value"])])]),e("div",De,[qe,e("div",Te,[o(x,{value:a.share,"onUpdate:value":s[2]||(s[2]=t=>a.share=t),valueModifiers:{trim:!0},"default-value":null,max:100,min:1,placeholder:`${k.value}%`,"show-button":!1,step:1,size:"large"},null,8,["value","placeholder"]),e("div",We,[e("div",Ee,[o(r,{component:i(ve),depth:1,size:16,color:"#fff"},null,8,["component"])]),e("div",Ve,[o(U,{show:!i(z)},{default:d(()=>[Ye,e("p",Le,[i(z)?(p(),q(b,{key:0,tooltip:!0,style:{"max-width":"100px",color:"white"}},{default:d(()=>[T(c(i(f)),1)]),_:1})):W("",!0)])]),_:1},8,["show"])])])])]),e("div",Oe,[Ge,e("div",He,[(p(!0),h(V,null,E(a.partyMembers,t=>(p(),h("div",{key:t.id,class:"add-member display-flex justify-between align-items-center"},[e("div",Ke,[e("div",Qe,[e("p",Je,c(t.revenue)+"%",1)]),e("div",Xe,[e("p",null,c(t.name),1),e("p",Ze,c(t.description),1)])]),e("div",et,[e("button",{class:"main-custom-btn gray-btn",type:"button",onClick:de=>se(t)},[e("span",null,[o(r,{component:i(he),depth:1,size:16,color:"#fff"},null,8,["component"])])],8,tt),e("button",{class:"main-custom-btn red-btn",type:"button",onClick:de=>ae(t.id)},[e("span",null,[o(r,{component:i(fe),depth:1,size:16,color:"#fff"},null,8,["component"])])],8,st)])]))),128)),e("button",{class:"add-member text-left display-flex justify-between align-items-center",onClick:s[3]||(s[3]=t=>m.value=!0)},[e("span",at,[e("span",nt,[e("span",null,[o(r,{component:i(ye),depth:1,size:24,color:"#fff"},null,8,["component"])])]),ot])])])]),e("div",it,[lt,e("div",rt,[e("div",{style:Y({maxWidth:`${k.value}%`,minWidth:"10%"}),class:"revenue-distributed-holder display-flex align-items-center justify-center"},[e("div",dt,[e("p",null,c(k.value)+"%",1),ct])],4),(p(!0),h(V,null,E(a.partyMembers,t=>(p(),h("div",{key:t.id,style:Y({maxWidth:`${t.revenue}%`,minWidth:"10%"}),class:"revenue-distributed-holder display-flex align-items-center justify-center"},[e("div",ut,[e("p",null,c(t.revenue)+"%",1),e("p",pt,[o(b,{tooltip:!0,style:{"max-width":"150px"}},{default:d(()=>[T(c(t.name),1)]),_:2},1024)])])],4))),128))]),e("div",{class:"mt-80 width-full"},[e("button",{class:"main-custom-btn width-full",type:"button",onClick:J},_t)])])])]),o(R,{show:m.value,"onUpdate:show":s[7]||(s[7]=t=>m.value=t),class:"quest-custom-modal min-w-648",preset:"dialog",title:"Dialog"},{header:d(()=>[vt]),default:d(()=>[e("div",ht,[ft,e("div",yt,[o(_,{value:n.name,"onUpdate:value":s[4]||(s[4]=t=>n.name=t),valueModifiers:{trim:!0},placeholder:"Name",size:"large",type:"text"},null,8,["value"]),o(_,{value:n.description,"onUpdate:value":s[5]||(s[5]=t=>n.description=t),valueModifiers:{trim:!0},placeholder:"Description",size:"large",type:"text"},null,8,["value"]),o(x,{value:n.revenue,"onUpdate:value":s[6]||(s[6]=t=>n.revenue=t),valueModifiers:{trim:!0},"default-value":null,max:a.share?100-a.share:100,min:1,placeholder:`Revenue share max ${a.share?100-a.share:100}% `,"show-button":!1,step:1,size:"large"},null,8,["value","max","placeholder"]),e("button",{class:"main-custom-btn width-full",type:"button",onClick:F},[e("span",null,c(v.value>=0?"Save":"Add"),1)])])])]),_:1},8,["show"]),o(R,{show:i(g),"onUpdate:show":s[9]||(s[9]=t=>Ie(g)?g.value=t:null),class:"quest-custom-modal min-w-648",preset:"dialog",title:"Dialog"},{header:d(()=>[gt]),default:d(()=>[e("div",xt,[bt,e("div",wt,[e("div",Mt,[e("p",null,c(i(y)),1),i(le)&&i(y)?(p(),h("button",{key:0,class:"tech-btn",onClick:s[8]||(s[8]=t=>re(i(y)))},[e("span",null,[o(r,{component:i(ge),depth:1,size:24,color:"#fff"},null,8,["component"])])])):W("",!0)]),o(i(S),{class:"main-custom-btn width-full",to:"/",type:"button",onClick:F},{default:d(()=>[Ct]),_:1})])])]),_:1},8,["show"])])]),_:1},8,["show"])}}});export{Xt as default};
